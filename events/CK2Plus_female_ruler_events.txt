
namespace = FemRule

#reserved: FemRule.100 to FemRule.199

#######################################
# FEMALE RULER EVENTS
# Written by Rylock
#######################################

# An older ruler has a daughter as his/her heir
character_event = {
	id = FemRule.100
	title = EVTNAME_FemRule_100
	desc = EVTDESC_FemRule_100
	picture = GFX_evt_noblewoman

	is_triggered_only = yes # on_yearly_pulse, random_events

	only_playable = yes
	min_age = 30
	only_capable = yes
	prisoner = no

	trigger = {
		has_living_children = yes
		has_law = cognatic_succession # This should probably only fire on agnatic-cognatic succession. It makes no sense for true-cognatic and wouldn't come up for agnatic anyway.

		player_heir = {
			is_female = yes
			age >= 6
			is_adult = no
			is_child_of = ROOT
		}

		NOR = {
			trait = teaching_daughter
			has_character_modifier = hoping_for_son_timer
			has_character_flag = misogyny
			any_spouse = { is_pregnant = yes }
			any_consort = { is_pregnant = yes }
			any_lover = { is_pregnant = yes }
			is_pregnant = yes
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 10 # players will want this faster
			ai = no
		}

		mult_modifier = {
			factor = 2

			practical_age >= 45
			is_female = yes
		}

		mult_modifier = {
			factor = 1.33
			practical_age >= 55
		}

		mult_modifier = {
			factor = 1.33
			practical_age >= 60
		}

		mult_modifier = {
			factor = 1.33
			practical_age >= 65
		}

		mult_modifier = {
			factor = 2
			is_female = yes
		}

		mult_modifier = {
			factor = 2
			trait = cynical
		}

		mult_modifier = {
			factor = 1.33
			is_ill = yes
		}

		mult_modifier = {
			factor = 1.33
			health < 3.1
		}

		mult_modifier = {
			factor = 2
			health < 2.1
		}

		mult_modifier = {
			factor = 4
			health < 1.1
		}

		mult_modifier = {
			factor = 4

			OR = {
				trait = eunuch
				trait = celibate
				fertility < 0.05
			}
		}

		mult_modifier = {
			factor = 2
			player_heir = { is_smart_trigger = yes }
		}

		mult_modifier = {
			factor = 2
			player_heir = { is_strong_trigger = yes }
		}

		mult_modifier = {
			factor = 0.5
			player_heir = { is_weak_trigger = yes }
		}

		mult_modifier = {
			factor = 0.2
			player_heir = { trait = inbred }
		}

		mult_modifier = {
			factor = 0.2
			player_heir = { is_dumb_trigger = yes }
		}

		mult_modifier = {
			factor = 0.5

			NOR = {
				religion_group = pagan_group
				religion_group = zoroastrian_group
			}
		}
	}

	immediate = {
		player_heir = {
			save_event_target_as = female_heir
		}
	}

	option = { # I shall raise her to rule
		name = EVTOPTA_FemRule_100

		ai_chance = {
			factor = 25

			mult_modifier = {
				factor = 1.25
				practical_age >= 40
			}

			mult_modifier = {
				factor = 1.5
				practical_age >= 50
			}

			mult_modifier = {
				factor = 1.5
				practical_age >= 60
			}

			mult_modifier = {
				factor = 2
				practical_age >= 70
			}

			mult_modifier = {
				factor = 2
				practical_age >= 80
			}

			mult_modifier = {
				factor = 0.5

				NOR = {
					religion_group = pagan_group
					religion_group = zoroastrian_group
				}
			}

			mult_modifier = {
				factor = 1.5
				is_ill = yes
			}

			mult_modifier = {
				factor = 1.5
				health < 3
			}

			mult_modifier = {
				factor = 1.25
				trait = leper
			}

			mult_modifier = {
				factor = 1.25
				is_maimed_trigger = yes
			}

			mult_modifier = {
				factor = 1.5
				fertility < 0.15
			}
		}

		add_trait = teaching_daughter

		event_target:female_heir = {
			show_scope_change = no

			opinion = {
				name = favoured_heiress
				who = ROOT
				years = 100
			}

			if = {
				limit = {
					ROOT = {
						NOT = {
							any_ward = {
								count = 2
							}
						}
					}
				}

				set_guardian = ROOT
				character_event = { id = 2484 }
			}
		}

		any_dynasty_member = {
			show_scope_change = no

			limit = {
				is_female = no
				is_incapable = no

				NOR = {
					trait = content
					trait = humble
					is_friend =	ROOT
				}
			}

			opinion = {
				name = opinion_upset
				who = ROOT
				years = 5
			}

			opinion = {
				name = covets_inheritance
				who = event_target:female_heir
				years = 5
			}
		}
	}

	option = { # I might still have a son

		name = EVTOPTB_FemRule_100

		trigger = {
			NOR = {
				trait = celibate
				trait = eunuch
			}

			trigger_if = {
				limit = { is_female = yes }
				practical_age < 45
			}
			trigger_else = {
				practical_age < 65
			}
		}

		ai_chance = {
			factor  = 75

			trigger = {
				fertility >= 0.05
			}

			mult_modifier = {
				factor = 1.25
				trait = lustful
			}

			mult_modifier = {
				factor = 2
				any_spouse = { fertility >= 0.33 }
			}

			mult_modifier = {
				factor = 2
				fertility >= 0.33
			}

			mult_modifier = {
				factor = 2
				fertility >= 0.5
			}

			mult_modifier = {
				factor = 0.5
				fertility >= 0.15
			}
		}

		add_character_modifier = {
			name = hoping_for_son_timer
			years = 5
			hidden = yes
		}

		event_target:female_heir = {
			show_scope_change = no

			prestige = -10

			opinion = {
				name = not_feeling_apreciated
				who = ROOT
				years = 5
			}

			character_event = { id = FemRule.101 }
		}
	}

	option = { # Never--player-only option to not see this event again, AI will have chance to reconsider if appropriate
		name = EVTOPTC_FemRule_100

		set_character_flag = misogyny

		event_target:female_heir = {
			show_scope_change = no

			prestige = -20

			opinion = {
				name = not_feeling_apreciated
				who = ROOT
				years = 10
			}

			character_event = { id = FemRule.101 }
		}

		ai_chance = { factor = 0 }
	}
}

# Daughter learns that her parent is hoping for a son
character_event = {
	id = FemRule.101
	desc = EVTDESC_FemRule_101
	picture = GFX_evt_noblewoman

	is_triggered_only = yes

	option = {
		name = EVTOPTA_FemRule_101 # I must earn my right to rule

		if = {
			limit = { trait = content }
			remove_trait = content
		}
		else = {
			random_list = {
				50 = { }
				30 = { add_trait_ambitious_effect = yes }
				20 = { add_trait_fully_diligent_effect = yes }
			}
		}

		ai_chance = {
			factor = 25

			mult_modifier = {
				factor = 2
				trait = diligent
			}

			mult_modifier = {
				factor = 3
				trait = ambitious
			}
		}
	}

	option = {
		name = EVTOPTB_FemRule_101 # But I deserve to rule!

		if = {
			limit = { trait = humble }
			remove_trait = humble
		}
		else = {
			random_list = {
				50 = { }
				30 = { add_trait_proud_effect = yes }
				20 = { add_trait_fully_envious_effect = yes }
			}
		}

		ai_chance = {
			factor = 25

			mult_modifier = {
				factor = 2
				trait = envious
			}

			mult_modifier = {
				factor = 3
				trait = proud
			}
		}
	}

	option = {
		name = EVTOPTC_FemRule_101 # I must bow to his/her wishes.

		if = {
			limit = { trait = ambitious }
			remove_trait = ambitious
		}
		else = {
			random_list = {
				50 = { }
				30 = { add_trait_content_effect = yes }
				20 = { add_trait_fully_humble_effect = yes }
			}
		}

		ai_chance = {
			factor = 50

			mult_modifier = {
				factor = 3
				trait = content
			}

			mult_modifier = {
				factor = 2
				trait = humble
			}

			mult_modifier = {
				factor = 2
				trait = trusting
			}
		}
	}
}

# The favored heiress is no longer the heir
character_event = {
	id = FemRule.105
	desc = EVTDESC_FemRule_105
	picture = GFX_evt_child_sword

	only_playable = yes
	min_age = 31

	trigger = {
		trait = teaching_daughter

		NOT = { # Should keep working if all children end up dead, see last event option
			player_heir = {
				has_opinion_modifier = {
					name = favoured_heiress
					who = ROOT
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 1
	}

	immediate = {
		random_child = {
			limit = {
				has_opinion_modifier = {
					name = favoured_heiress
					who = ROOT
				}
			}

			save_event_target_as = old_female_heir
		}

		player_heir = {
			save_event_target_as = new_heir
		}
	}

	option = {
		name = EVTOPTA_FemRule_105 # I have a son now. That's all that matters.

		trigger = {
			player_heir = {
				is_female = no
				is_child_of = ROOT
			}
		}

		remove_trait = teaching_daughter
		clr_character_flag = will_acknowledge_bastards
		clr_character_flag = no_pledging_to_daughter

		reverse_remove_opinion = {
			name = favoured_heiress
			who = event_target:old_female_heir
		}

		any_dynasty_member = {
			limit = {
				is_female = no
				is_incapable = no

				NOR = {
					trait = content
					trait = humble
					is_friend = ROOT
				}
			}

			remove_opinion = {
				name = opinion_upset
				who = ROOT
			}

			remove_opinion = {
				name = covets_inheritance
				who = event_target:old_female_heir
			}
		}
	}

	option = {
		name = EVTOPTB_FemRule_105 # I have another daughter who can take her place.

		trigger = {
			player_heir = {
				is_female = yes
				is_child_of = ROOT
			}
		}

		clr_character_flag = no_pledging_to_daughter

		event_target:new_heir = {
			show_scope_change = no

			opinion = {
				name = favoured_heiress
				who = ROOT
				years = 100
			}
		}

		any_dynasty_member = {
			limit = {
				is_female = no
				NOT = { trait = content }
				NOT = { trait = humble }
				NOT = { trait = incapable }
				NOT = { is_friend = ROOT }
			}

			opinion = {
				name = covets_inheritance
				who = event_target:new_heir
				years = 5
			}

			remove_opinion = {
				name = covets_inheritance
				who = event_target:old_female_heir
			}
		}
	}

	option = {
		name = EVTOPTC_FemRule_105 # There is nothing to be done.

		trigger = {
			NOT = {
				player_heir = { always = yes }
			}
		}

		remove_trait = teaching_daughter
		clr_character_flag = will_acknowledge_bastards
		clr_character_flag = no_pledging_to_daughter
	}
}

# Event for a bastard to be acknowledged by a willing liege parent
character_event = {
	id = FemRule.111
	desc = EVTDESC_FemRule_111
	picture = GFX_evt_emissary

	only_capable = yes

	trigger = {
		trait = bastard

		NOR = {
			trait = eunuch
			trait = celibate
			has_character_flag = acknowledged_bastard
		}

		any_liege = {
			has_character_flag = will_acknowledge_bastards
			is_parent_of = ROOT

			trigger_if = {
				limit = { ROOT = { is_female = yes } }
				NOT = { any_child = { is_female = no } }
			}
		}

	}

	mean_time_to_happen = {
		months = 3

		mult_modifier = {
			factor = 0.5

			is_adult = yes
			practical_age < 30
		}

		mult_modifier = {
			factor = 0.75
			is_married = yes
		}

		mult_modifier = {
			factor = 0.25
			trait = genius
		}

		mult_modifier = {
			factor = 0.5

			OR = {
				trait = quick
				trait = shrewd
			}
		}

		mult_modifier = {
			factor = 0.75

			OR = {
				is_strong_trigger = yes
				trait = attractive
			}
		}


		mult_modifier = {
			factor = 0.5

			OR = {
				trait = grey_eminence
				trait = brilliant_strategist
			}
		}

		mult_modifier = {
			factor = 0.75

			OR = {
				trait = charismatic_negotiator
				trait = midas_touched
				trait = skilled_tactician
			}
		}

		mult_modifier = {
			factor = 1.5
			practical_age >= 40
		}

		mult_modifier = {
			factor = 1.5
			health < 3.1
		}

		mult_modifier = {
			factor = 1.5

			OR = {
				trait = amateurish_plotter
				trait = naive_appeaser
				trait = indulgent_wastrel
				trait = misguided_warrior
				trait = detached_priest
			}
		}

		mult_modifier = {
			factor = 0.75
			trait = ambitious
		}

		mult_modifier = {
			factor = 0.75

			OR = {
				trait = diligent
				trait = just
				trait = kind
				trait = brave
			}
		}

		mult_modifier = {
			factor = 1.5

			OR = {
				trait = cruel
				trait = craven
				trait = content
				trait = slothful
				trait = arbitrary
			}
		}

		mult_modifier = {
			factor = 2
			trait = homosexual
		}

		mult_modifier = {
			factor = 2

			OR = {
				is_weak_trigger = yes
				trait = blinded
				is_maimed_trigger = yes
			}
		}

		mult_modifier = {
			factor = 2

			OR = {
				trait = slow
				trait = dull
			}
		}

		mult_modifier = {
			factor = 3
			trait = imbecile
		}

		mult_modifier = {
			factor = 3
			trait = inbred
		}
	}

	option = {
		name = EVTOPTA_FemRule_111

		custom_tooltip = {
			text = EVTTOOLTIP_FemRule_111
			set_character_flag = acknowledged_bastard
		}
	}
}

# ai event to acknowledge a bastard if very old and heirless
character_event = {
	id = FemRule.113
	desc = EVTDESC_FemRule_113
	picture = GFX_evt_council

	is_triggered_only = yes

	only_playable = yes
	religion_group = christian
	only_men = yes
	min_age = 50
	only_capable = yes
	prisoner = no
	is_patrician = no
	ai = yes

	trigger = {
		OR = {
			is_feudal = yes
			is_tribal = yes
		}

		piety >= 20
		immortal = no

		NOR = {
			current_heir = {
				OR = {
					dynasty = ROOT
					is_child_of = ROOT
				}
			}

			any_spouse = { is_pregnant = yes }
			any_consort = { is_pregnant = yes }
		}

		OR = {
			AND = {
				NOT = { has_law = enatic_succession }

				any_child = {
					is_female = no
					is_alive = yes
					is_vassal_or_below_of = ROOT

					NOR = {
						trait = eunuch
						trait = celibate
					}
				}
			}

			AND = {
				NOT = { has_law = agnatic_succession }

				any_child = {
					is_female = yes
					is_alive = yes
					is_vassal_or_below_of = ROOT

					NOR = {
						trait = eunuch
						trait = celibate
					}
				}
			}
		}

		OR = {
			has_law = succ_gavelkind
			has_law = succ_primogeniture
			has_law = succ_seniority
		}

		NOR = {
			has_character_flag = will_acknowledge_bastards
			has_character_flag = will_not_acknowledge_bastards
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 0.2
			trait = zealous
		}

		mult_modifier = {
			factor = 0.33

			OR = {
				trait = proud
				trait = cruel
				trait = content
			}
		}

		mult_modifier = {
			factor = 2
			trait = cynical
		}

		mult_modifier = {
			factor = 1.33
			trait = kind
		}

		mult_modifier = {
			factor = 2
			health < 3.1
		}

		mult_modifier = {
			factor = 2
			health < 2.1
		}

		mult_modifier = {
			factor = 2
			fertility < 0.1
		}

		mult_modifier = {
			factor = 1.33
			practical_age >= 60
		}

		mult_modifier = {
			factor = 1.33
			practical_age >= 65
		}

		mult_modifier = {
			factor = 1.33
			practical_age >= 70
		}
	}

	option = {
		name = EVTOPTA_FemRule_113

		piety = -20
		set_character_flag = will_acknowledge_bastards

		ai_chance = {
			factor = 60

			mult_modifier = {
				factor = 2
				trait = cynical
			}

			mult_modifier = {
				factor = 2
				trait = kind
			}

			mult_modifier = {
				factor = 5
				real_tier = EMPEROR
			}

			mult_modifier = {
				factor = 2.5
				real_tier = KING
			}

			mult_modifier = {
				factor = 1.5
				real_tier = DUKE
			}
		}
	}

	option = {
		name = EVTOPTB_FemRule_113

		set_character_flag = will_not_acknowledge_bastards

		ai_chance = {
			factor = 40

			mult_modifier = {
				factor = 3
				trait = zealous
			}

			mult_modifier = {
				factor = 2

				OR = {
					trait = proud
					trait = cruel
					trait = content
				}
			}
		}
	}
}

# AI event to stop trying to acknowledge a bastard if conditions change
character_event = {
	id = FemRule.114

	hide_window = yes

	only_playable = yes
	has_character_flag = will_acknowledge_bastards
	only_men = yes
	min_age = 50
	only_capable = yes
	prisoner = no

	trigger = {
		OR = {
			AND = {
				is_feudal = no
				is_tribal = no
			}

			immortal = yes
			NOT = { religion_group = christian }

			current_heir = {
				OR = {
					dynasty = ROOT
					is_child_of = ROOT
				}
			}

			any_spouse = { is_pregnant = yes }
			any_consort = { is_pregnant = yes }

			NOR = {
				has_law = succ_gavelkind
				has_law = succ_primogeniture
				has_law = succ_seniority
			}
		}
	}

	mean_time_to_happen = {
		days = 1
	}

	immediate = {
		clr_character_flag = will_acknowledge_bastards
	}
}

### Events that deal with a female with martial traits

# Martial Lady
character_event = {
	id = FemRule.120
	desc = EVTDESC_FemRule_120
	picture = GFX_evt_girl_with_sword

	is_triggered_only = yes # on_yearly_pulse

	min_age = 16
	only_women = yes

	trigger = {
		OR = {
			trait = holy_warrior
			has_crusade_trait_trigger = yes
			has_education_martial_trigger = yes
		}

		NOR = {
			trait = martial_lady
			has_character_flag = made_fem_martial_choice
			religion_group = pagan_group
			religion_group = zoroastrian_group
		}
	}

	immediate = {
		set_character_flag = made_fem_martial_choice
		remove_trait = martial_lady_tengri
		remove_trait = martial_lady_pagan
	}

	option = {
		name = EVTOPTA_FemRule_120

		add_trait = martial_lady

		ai_chance = {
			factor = 40

			mult_modifier = {
				factor = 2
				trait = bastard
			}

			mult_modifier = {
				factor = 0.5

				OR = {
					is_ruler = yes
					any_heir_title = { always = yes }
				}
			}

			mult_modifier = {
				factor = 0.5
				is_close_relative = liege
			}

			mult_modifier = {
				factor = 1.5
				martial >= 10
			}

			mult_modifier = {
				factor = 1.5
				martial >= 12
			}

			mult_modifier = {
				factor = 1.5
				martial >= 14
			}

			mult_modifier = {
				factor = 1.5
				martial >= 16
			}

			mult_modifier = {
				factor = 0.1
				martial < 5
			}
		}
	}

	option = {
		name = EVTOPTB_FemRule_120

		change_martial = -2

		ai_chance = {
			factor = 60

			trigger = {
				is_lowborn = no
			}

			mult_modifier = {
				factor = 0.1

				NOR = {
					any_claim = { always = yes }
					any_heir_title = { always = yes }
					any_pretender_title = { always = yes }
					father = { is_ruler = yes }
					mother = { is_ruler = yes }
				}
			}

			mult_modifier = {
				factor = 1.5
				martial < 8
			}
		}
	}
}

# Tengri Martial Lady
character_event = {
	id = FemRule.125
	desc = EVTDESC_FemRule_125
	picture = GFX_evt_girl_with_sword

	is_triggered_only = yes # on_yearly_pulse

	min_age = 16
	only_women = yes

	trigger = {
		NOR = {
			trait = martial_lady_tengri
			has_character_flag = made_fem_martial_choice
		}

		OR = {
			religion_openly_tengri_or_reformed_trigger = yes
			religion_group = zoroastrian_group
		}

		OR = {
			trait = holy_warrior
			has_crusade_trait_trigger = yes
			has_education_martial_trigger = yes
		}
	}

	immediate = {
		set_character_flag = made_fem_martial_choice
		remove_trait = martial_lady
		remove_trait = martial_lady_pagan
	}

	option = {
		name = EVTOPTA_FemRule_120

		add_trait = martial_lady_tengri

		ai_chance = {
			factor = 60

			mult_modifier = {
				factor = 2
				trait = bastard
			}

			mult_modifier = {
				factor = 0.5

				OR = {
					is_ruler = yes
					any_heir_title = { always = yes }
				}
			}

			mult_modifier = {
				factor = 0.5
				is_close_relative = liege
			}

			mult_modifier = {
				factor = 1.5
				martial >= 10
			}

			mult_modifier = {
				factor = 1.5
				martial >= 12
			}

			mult_modifier = {
				factor = 1.5
				martial >= 14
			}

			mult_modifier = {
				factor = 1.5
				martial >= 16
			}

			mult_modifier = {
				factor = 0.1
				martial < 5
			}
		}
	}

	option = {
		name = EVTOPTB_FemRule_125

		change_martial = -2

		ai_chance = {
			factor = 40

			trigger = {
				is_lowborn = no
			}

			mult_modifier = {
				factor = 0.1

				NOR = {
					any_claim = { always = yes }
					any_heir_title = { always = yes }
					any_pretender_title = { always = yes }
					father = { is_ruler = yes }
					mother = { is_ruler = yes }
				}
			}

			mult_modifier = {
				factor = 1.5
				martial < 8
			}
		}
	}
}

# Shield Maiden
character_event = {
	id = FemRule.130
	desc = EVTDESC_FemRule_125
	picture = GFX_evt_girl_with_sword

	is_triggered_only = yes # on_yearly_pulse

	religion_group = pagan_group
	min_age = 16
	only_women = yes

	trigger = {
		OR = {
			trait = holy_warrior
			has_crusade_trait_trigger = yes
			trait = berserker
			trait = viking
			trait = sea_queen
			has_education_martial_trigger = yes
		}

		religion_openly_tengri_or_reformed_trigger = no

		NOR = {
			trait = martial_lady_pagan
			has_character_flag = made_fem_martial_choice
		}
	}

	immediate = {
		set_character_flag = made_fem_martial_choice
		remove_trait = martial_lady_tengri
		remove_trait = martial_lady
	}

	option = {
		name = EVTOPTA_FemRule_120

		add_trait = martial_lady_pagan

		ai_chance = {
			factor = 75

			mult_modifier = {
				factor = 2
				trait = bastard
			}

			mult_modifier = {
				factor = 0.5

				OR = {
					is_ruler = yes
					any_heir_title = { always = yes }
				}
			}

			mult_modifier = {
				factor = 0.5
				is_close_relative = liege
			}

			mult_modifier = {
				factor = 1.5
				martial >= 10
			}

			mult_modifier = {
				factor = 1.5
				martial >= 12
			}

			mult_modifier = {
				factor = 1.5
				martial >= 14
			}

			mult_modifier = {
				factor = 1.5
				martial >= 16
			}

			mult_modifier = {
				factor = 0.1
				martial < 5
			}
		}
	}

	option = {
		name = EVTOPTB_FemRule_125

		change_martial = -2

		ai_chance = {
			factor = 25

			trigger  = {
				is_lowborn = no
			}

			mult_modifier = {
				factor = 0.1

				NOR = {
					any_claim = { always = yes }
					any_heir_title = { always = yes }
					any_pretender_title = { always = yes }
					father = { is_ruler = yes }
					mother = { is_ruler = yes }
				}
			}

			mult_modifier = {
				factor = 1.5
				martial < 8
			}
		}
	}
}

### Vassal is concerned at liege's martial upbringing of daughter

# Girl is being trained martially
character_event = {
	id = FemRule.134

	is_triggered_only = yes # on_yearly_pulse, random_events
	hide_window = yes

	min_age = 6
	max_age = 15
	only_women = yes
	prisoner = no
	only_capable = yes
	lacks_dlc = "Conclave"

	trigger = {
		is_inaccessible_trigger = no

		NOR = {
			trait = bastard
			religion_group = pagan_group
			religion_group = zoroastrian_group
		}

		guardian = {
			has_education_martial_trigger = yes
		}

		liege = {
			OR = {
				is_parent_of = ROOT
				dynasty = ROOT
			}

			NOR = {
				religion_group = pagan_group
				religion_group = zoroastrian_group
			}
		}

		any_realm_character = {
			is_adult = yes
			prisoner = no
			is_ill = no
			health >= 3.0
			is_inaccessible_trigger = no
			is_incapable = no
			has_education_martial_trigger = no

			NOR = {
				trait = stressed
				trait = depressed
				trait = cynical
				trait = martial_lady_pagan
				trait = martial_lady_tengri
				trait = martial_lady

				any_ward = {
					count = 2
				}
			}

			ROOT = {
				liege = {
					religion = PREVPREV
					same_realm = PREVPREV

					OR = {
						is_parent_of = ROOT
						ROOT = { is_close_relative = PREVPREVPREV }
					}

					OR = {
						AND = {
							opinion = { who = PREVPREV value >= 25 }
							reverse_opinion = { who = PREVPREV value >= 25 }
						}

						is_allied_with = PREVPREV
						is_close_relative = PREVPREV
						ROOT = { is_close_relative = PREVPREVPREV }
					}

					NOR = {
						character = PREVPREV
						is_rival = PREVPREV
					}
				}
			}

			trigger_if = {
				limit = { has_character_flag = asked_martial_daughter }

				had_character_flag = {
					flag = asked_martial_daughter
					years >= 5
				}
			}
		}

		trigger_if = {
			limit = { has_character_flag = martial_daughter }

			had_character_flag = {
				flag = martial_daughter
				years >= 2
			}
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 1.33
			age >= 10
		}

		mult_modifier = {
			factor = 2
			age >= 12
		}

		mult_modifier = {
			factor = 2
			age >= 14
		}
	}

	immediate = {
		clr_character_flag = martial_daughter
		set_character_flag = martial_daughter

		random_realm_character = {
			limit = {
				is_adult = yes
				prisoner = no
				is_ill = no
				health >= 3.0
				is_inaccessible_trigger = no
				is_incapable = no
				has_education_martial_trigger = no

				NOR = {
					trait = stressed
					trait = depressed
					trait = cynical
					trait = martial_lady_pagan
					trait = martial_lady_tengri
					trait = martial_lady

					any_ward = {
						count = 2
					}
				}

				ROOT = {
					liege = {
						religion = PREVPREV
						same_realm = PREVPREV

						OR = {
							is_parent_of = ROOT
							ROOT = { is_close_relative = PREVPREVPREV }
						}

						OR = {
							is_allied_with = PREVPREV
							is_close_relative = PREVPREV
							ROOT = { is_close_relative = PREVPREVPREV }

							AND = {
								opinion = { who = PREVPREV value >= 25 }
								reverse_opinion = { who = PREVPREV value >= 25 }
							}
						}

						NOR = {
							character = PREVPREV
							is_rival = PREVPREV
						}
					}
				}

				trigger_if = {
					limit = { has_character_flag = asked_martial_daughter }

					had_character_flag = {
						flag = asked_martial_daughter
						years >= 5
					}
				}
			}

			preferred_limit = {
				ROOT = {
					liege = {
						OR = {
							is_allied_with = PREVPREV
							is_close_relative = PREVPREV
							ROOT = { is_close_relative = PREVPREVPREV }
						}
					}
				}
			}

			character_event = { id = FemRule.135 }
		}
	}
}

# Relative of the girl becomes aware of her training
character_event = {
	id = FemRule.135
	desc = EVTDESC_FemRule_135
	picture = GFX_evt_girl_with_sword

	is_triggered_only = yes

	option = {
		name = EVTOPTA_FemRule_135 # Ask to mentor the girl

		clr_character_flag = asked_martial_daughter
		set_character_flag = asked_martial_daughter

		FROM = {
			show_scope_change = no

			liege = {
				show_scope_change = no

				letter_event = {
					id = FemRule.136
					tooltip = EVTTOOLTIP2481
				}
			}
		}

		ai_chance = {
			factor = 50

			mult_modifier = {
				factor = 2
				is_close_relative = FROM
			}

			mult_modifier = {
				factor = 1.25
				diplomacy >= 12
			}

			mult_modifier = {
				factor = 1.25
				stewardship >= 12
			}

			mult_modifier = {
				factor = 1.5
				trait = zealous
			}

			mult_modifier = {
				factor = 0.25

				OR = {
					trait = slothful
					trait = craven
					trait = trusting
					trait = content
				}
			}

			mult_modifier = {
				factor = 0.25

				OR = {
					trait = amateurish_plotter
					trait = naive_appeaser
					trait = indulgent_wastrel
					trait = detached_priest
				}
			}

			mult_modifier = {
				factor = 0.5

				OR = {
					trait = flamboyant_schemer
					trait = underhanded_rogue
					trait = thrifty_clerk
					trait = dutiful_cleric
				}
			}
		}
	}

	option = {
		name = EVTOPTB2480 # Ignore it

		ai_chance = {
			factor = 50

			mult_modifier = {
				factor = 0.5
				is_close_relative = FROM
			}

			mult_modifier = {
				factor = 1.25

				FROM = {
					liege = {
						reverse_opinion = {
							who = ROOT
							value < 25
						}
					}
				}
			}

			mult_modifier = {
				factor = 1.25

				FROM = {
					liege = {
						reverse_opinion = {
							who = ROOT
							value < 0
						}
					}
				}
			}

			mult_modifier = {
				factor = 0.5

				FROM = {
					liege = { is_friend = ROOT }
				}
			}

			mult_modifier = {
				factor = 0.5

				OR = {
					trait = grey_eminence
					trait = midas_touched
				}
			}

			mult_modifier = {
				factor = 0.5
				trait = zealous
			}

			mult_modifier = {
				factor = 0.75
				trait = diligent
			}

			mult_modifier = {
				factor = 0.75
				trait = ambitious
			}
		}

		clr_character_flag = asked_martial_daughter
		set_character_flag = asked_martial_daughter
		FROM = { clr_character_flag = martial_daughter }
	}
}

# The girl's liege is asked by the relative to let him/her raise the child
letter_event = {
	id = FemRule.136
	desc = EVTDESC_FemRule_136

	is_triggered_only = yes

	option = {
		name = EVTOPTA_FemRule_136 # Agree to let them raise her

		ai_chance = {
			factor = 50

			mult_modifier = {
				factor = 0.1

				OR = {
					trait = martial_lady_tengri
					trait = martial_lady_pagan
					trait = martial_lady
				}
			}

			mult_modifier = {
				factor = 2
				trait = zealous
			}

			mult_modifier = {
				factor = 1.5
				trait = shy
			}

			mult_modifier = {
				factor = 1.5
				trait = content
			}

			mult_modifier = {
				factor = 1.5
				trait = humble
			}

			mult_modifier = {
				factor = 0.5

				FROM = {
					OR = {
						trait = amateurish_plotter
						trait = naive_appeaser
						trait = indulgent_wastrel
						trait = detached_priest
					}
				}
			}

			mult_modifier = {
				factor = 2

				FROMFROM = {
					OR = {
						is_weak_trigger = yes
						trait = dwarf
						trait = craven
						trait = hunchback
						martial < 4
					}
				}
			}

			mult_modifier = {
				factor = 0.75
				any_ward = { character = FROMFROM }
			}

			mult_modifier = {
				factor = 0.5

				current_heir = { character = FROMFROM }
				any_ward = { character = FROMFROM }
			}
		}

		reverse_opinion = {
			name = opinion_disgruntled
			who = FROMFROM
			years = 10
		}

		FROM = {
			show_scope_change = no

			letter_event = {
				id = FemRule.137
				tooltip = EVTTOOLTIP2482
			}
		}
	}

	option = {
		name = EVTOPTB_FemRule_136 # Refuse

		ai_chance = {
			factor = 50

			mult_modifier = {
				factor = 3
				NOT = {
					any_child = { is_female = no }
				}
			}

			mult_modifier = {
				factor = 1.5
				opinion = { who = FROM value < 25 }
			}

			mult_modifier = {
				factor = 2
				opinion = { who = FROM value < 0 }
			}

			mult_modifier = {
				factor = 2
				trait = cynical
			}

			mult_modifier = {
				factor = 1.5
				is_female = yes
			}

			mult_modifier = {
				factor = 1.5
				trait = proud
			}

			mult_modifier = {
				factor = 0.5

				FROM = {
					OR = {
						trait = grey_eminence
						trait = midas_touched
					}
				}
			}

			mult_modifier = {
				factor = 2

				FROMFROM = {
					OR = {
						is_strong_trigger = yes
						trait = tall
						trait = brave
						martial >= 10
					}
				}
			}

			mult_modifier = {
				factor = 1.25
				any_ward = { character = FROMFROM }
			}
		}

		reverse_opinion = {
			name = opinion_pleased
			who = FROMFROM
			years = 2
		}

		FROM = {
			show_scope_change = no

			letter_event = {
				id = FemRule.138
				tooltip = EVTTOOLTIP2483
			}
		}
	}
}

# The relative becomes the guardian of the girl
letter_event = {
	id = FemRule.137
	desc = EVTDESC2482

	is_triggered_only = yes

	option = {
		name = EXCELLENT

		FROMFROMFROM = {
			show_scope_change = no

			set_guardian = ROOT

			character_event = {
				id = 2484
				tooltip = EVTTOOLTIP2484
			}
		}

		opinion = {
			name = opinion_granted_guardianship
			who = FROM
			years = 2
		}
	}
}

# The request is denied
letter_event = {
	id = FemRule.138
	desc = EVTDESC_FemRule_138

	is_triggered_only = yes

	option = {
		name = EVTOPTA_FemRule_138

		opinion = {
			name = opinion_denied_guardianship
			who = FROM
			years = 2
		}
	}
}

### Lady's Champion Events

# Champion retires
character_event = {
	id = FemRule.140
	desc = EVTDESC_FemRule_140
	picture = GFX_evt_knight_kneeling

	is_triggered_only = yes # on_yearly_pulse, random_events

	min_age = 50
	only_men = yes

	trigger = {
		OR = {
			has_minor_title = title_champion
			has_minor_title = title_ladys_champion
		}

		OR = {
			is_incapable = yes
			trait = infirm
			health < 3.1
			martial < 5
		}

		NOR = {
			has_character_flag = retired_champion
			has_character_flag = attending_tournament
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 2
			martial < 5
		}

		mult_modifier = {
			factor = 0.67
			martial >= 10
		}

		mult_modifier = {
			factor = 0.67
			martial >= 12
		}

		mult_modifier = {
			factor = 0.67
			martial >= 14
		}

		mult_modifier = {
			factor = 0.67
			martial >= 16
		}

		mult_modifier = {
			factor = 100
			is_incapable = yes
		}

		mult_modifier = {
			factor = 2
			health < 2.1
		}

		mult_modifier = {
			factor = 2
			health < 1.1
		}

		mult_modifier = {
			factor = 2
			practical_age >= 60
		}

		mult_modifier = {
			factor = 2
			practical_age >= 65
		}

		mult_modifier = {
			factor = 2
			practical_age >= 70
		}
	}

	option = {
		name = EVTOPTA_FemRule_140

		set_character_flag = retired_champion

		liege = {
			show_scope_change = no

			letter_event = {
				id = FemRule.141
				tooltip = EVTTOOLTIP_FemRule_140
			}
		}
	}
}

letter_event = {
	id = FemRule.141
	desc = EVTDESC_FemRule_141

	is_triggered_only = yes

	option = {
		name = EVTOPTA_FemRule_141

		FROM = {
			show_scope_change = no

			if = {
				limit = { has_minor_title = title_champion }
				remove_title = title_champion
			}
			if = {
				limit = { has_minor_title = title_ladys_champion }
				remove_title = title_ladys_champion
			}
		}

		opinion = {
			name = former_champion
			who = FROM
			years = 10
		}

		reverse_opinion = {
			name = former_champion
			who = FROM
			years = 10
		}
	}
}

# Ask to become lady's champion
character_event = {
	id = FemRule.145
	desc = EVTDESC_FemRule_145
	picture = GFX_evt_knight_kneeling

	is_triggered_only = yes # on_yearly_pulse, random_events

	only_men = yes
	min_age = 16
	prisoner = no
	only_capable = yes
	is_sick = no

	trigger = {
		OR = {
			trait = misguided_warrior
			trait = tough_soldier
			trait = skilled_tactician
			trait = brilliant_strategist
		}

		health_traits == 0

		NOR = {
			trait = craven
			has_character_flag = retired_champion
			has_character_flag = ask_not_champion
			has_minor_title = title_ladys_champion
		}

		liege = {
			is_female = yes
			is_adult = yes

			OR = {
				is_feudal = yes
				is_tribal = yes
			}

			religion_openly_baltic_or_reformed_trigger = no
			religion_openly_finnish_or_reformed_trigger = no
			religion_openly_slavic_or_reformed_trigger = no
			religion_openly_west_african_or_reformed_trigger = no
			religion_openly_aztec_or_reformed_trigger = no
			NOT = { has_character_flag = no_more_ask_for_champion }

			opinion = { who = ROOT value >= 20 }
			reverse_opinion = { who = ROOT value >= 20 }

			trigger_if = {
				limit = { has_assigned_minor_title = title_ladys_champion }

				any_courtier_or_vassal = {
					has_minor_title = title_ladys_champion
					martial < ROOT
				}
			}
			trigger_else = {
				can_grant_title = title_ladys_champion
			}

			trigger_if = {
				limit = {
					ai = no
					has_character_flag = asked_for_champion
				}

				had_character_flag = {
					flag = asked_for_champion
					years >= 1
				}
			}
		}
	}

	weight_multiplier = {
		factor = 1

		mult_modifier = {
			factor = 2
			trait = ambitious
		}

		mult_modifier = {
			factor = 0.5

			OR = {
				trait = duelist
				trait = poet
			}
		}

		mult_modifier = {
			factor = 1.33
			trait = proud
		}

		mult_modifier = {
			factor = 1.33
			trait = diligent
		}

		mult_modifier = {
			factor = 1.33
			trait = envious
		}

		mult_modifier = {
			factor = 0.5

			OR = {
				trait = scholar
				trait = gardener
			}
		}

		mult_modifier = {
			factor = 0.33
			trait = content
		}

		mult_modifier = {
			factor = 0.33
			trait = humble
		}

		mult_modifier = {
			factor = 2
			is_lover = ROOT
		}

		mult_modifier = {
			factor = 1.33
			opinion = { who = liege value >= 40 }
		}

		mult_modifier = {
			factor = 1.33
			opinion = { who = liege value >= 60 }
		}

		mult_modifier = {
			factor = 1.33
			opinion = { who = liege value >= 80 }
		}
	}

	immediate = {
		liege = { set_character_flag = asked_for_champion }
	}

	option = {
		name = EVTOPTA_FemRule_145

		liege = {
			show_scope_change = no

			letter_event = {
				id = FemRule.146
				tooltip = EVTTOOLTIP_FemRule_145
			}
		}
	}

	option = {
		name = EVTOPTB_FemRule_145

		set_character_flag = ask_not_champion

		ai_chance = { factor = 0 }
	}
}

# Someone wants to be my champion
letter_event = {
	id = FemRule.146
	desc = EVTDESC_FemRule_146

	is_triggered_only = yes

	option = {
		name = EVTOPTA_FemRule_146 # I accept his offer

		ai_chance = {
			factor = 70

			trigger = {
				NOR = {
					any_courtier_or_vassal = {
						has_minor_title = title_ladys_champion

						OR = {
							is_lover = ROOT
							is_married = ROOT
							is_friend = ROOT
						}
					}
				}
			}
		}

		any_courtier_or_vassal = {
			show_scope_change = no

			limit = { has_minor_title = title_ladys_champion }

			remove_title = title_ladys_champion

			opinion = {
				name = opinion_very_disappointed
				who = ROOT
				years = 5
			}
		}

		FROM = {
			show_scope_change = no

			give_minor_title = title_ladys_champion
		}
	}

	option = {
		name = EVTOPTB_FemRule_146 # I shall keep my current champion

		trigger = {
			any_courtier_or_vassal = { has_minor_title = title_ladys_champion }
		}

		ai_chance = {
			factor = 30

			mult_modifier = {
				factor = 0.1

				OR = {
					is_married = FROM
					is_lover = FROM
					is_friend = FROM
				}
			}

			mult_modifier = {
				factor = 0.1

				any_courtier_or_vassal = {
					has_minor_title = title_ladys_champion

					reverse_opinion = {
						who = ROOT
						value < 0
					}
				}
			}
		}

		any_courtier_or_vassal = {
			show_scope_change = no

			limit = { has_minor_title = title_ladys_champion }

			letter_event = {
				id = FemRule.147
				tooltip = EVTTOOLTIP_FemRule_146
			}
		}

		reverse_opinion = {
			name = opinion_disappointed
			who = FROM
			years = 5
		}
	}

	option = {
		name = EVTOPTC_FemRule_146 # No, and don't ask again.

		FROM = {
			show_scope_change = no

			set_character_flag = ask_not_champion

			opinion = {
				name = opinion_very_disappointed
				who = ROOT
				years = 5
			}
		}

		ai_chance = { factor = 0 }
	}

	option = {
		name = EVTOPTD_FemRule_146 # I want no more requests such as these.

		set_character_flag = no_more_ask_for_champion

		reverse_opinion = {
			name = opinion_very_disappointed
			who = FROM
			years = 5
		}

		ai_chance = { factor = 0 }
	}
}

# Champion hears of the request to replace him
letter_event = {
	id = FemRule.147
	desc = EVTDESC_FemRule_147

	is_triggered_only = yes

	trigger = {
		has_job_title = job_marshal
	}

	option = {
		name = EVTOPTA_FemRule_147 # I must try harder to be worthy

		random_list = {
			50 = { change_martial = 1 }

			50 = {
				trigger = {
					NOR = {
						trait = stressed
						trait = depressed
					}
				}

				add_trait_stressed_effect = yes
			}
		}
	}

	option = {
		name = EVTOPTB_FemRule_147 # So be it

		trigger = {
			NOR = {
				trait = ambitious
				trait = proud
			}
		}

		prestige = -5
	}
}

### Female hunting events

# The hunt begins
character_event = {
	id = FemRule.150
	desc = EVTDESC_FemRule_150
	picture = GFX_evt_grazia

	is_triggered_only = yes # base_hunting_events.txt

	option = {
		name = EVTOPTA_FemRule_150

		set_character_flag = female_hunt_begin

		if = {
			limit = { trait = stressed }

			random = {
				chance = 20
				remove_trait = stressed
			}
		}

		if = {
			limit = { trait = depressed }

			random = {
				chance = 20
				remove_trait = depressed
			}
		}
	}
}

# The ruler makes a friend on the hunt
character_event = {
	id = FemRule.151
	desc = EVTDESC_FemRule_151
	picture = GFX_evt_grazia

	is_triggered_only = yes # base_hunting_events.txt

	immediate = {
		set_character_flag = made_hunt_friend
	}

	option = {
		name = EVTOPTA_FemRule_151 # I value this new friendship

		ai_chance = {
			factor = 70

			trigger = {
				NOT = { trait = shy }
			}
		}

		random_courtier = {
			show_scope_change = no

			limit = {
				is_female = yes
				religion = ROOT
				prisoner = no
				is_adult = yes
				is_abroad = no
				is_incapable = no
				num_of_friends < 2
				health_traits == 0

				NOR = {
					is_friend = ROOT
					is_rival = ROOT
					trait = martial_lady
					trait = martial_lady_pagan
					trait = martial_lady_tengri
				}
			}

			add_friend = ROOT
		}
	}

	option = {
		name = EVTOPTB_FemRule_151 # It will not outlast the hunt

		random_courtier = {
			show_scope_change = no

			limit = {
				is_female = yes
				religion = ROOT
				prisoner = no
				is_adult = yes
				is_abroad = no
				is_incapable = no
				num_of_friends < 2
				health_traits == 0

				NOR = {
					is_friend = ROOT
					is_rival = ROOT
					trait = martial_lady
					trait = martial_lady_pagan
					trait = martial_lady_tengri
				}
			}

			opinion = {
				name = opinion_acquaintance
				who = ROOT
				years = 2
			}
		}

		random = {
			chance = 20
			add_trait_partially_shy_effect = yes
		}

		ai_chance = { factor = 30 }
	}
}

# The ruler makes a rival on the hunt
character_event = {
	id = FemRule.152
	desc = EVTDESC_FemRule_152
	picture = GFX_evt_grazia

	is_triggered_only = yes # base_hunting_events.txt

	immediate = {
		set_character_flag = made_hunt_rival
	}

	option = {
		name = EVTOPTA_FemRule_152 # How dare she ruin my hunt!

		random_courtier = {
			show_scope_change = no

			limit = {
				is_female = yes
				religion = ROOT
				prisoner = no
				is_adult = yes
				is_abroad = no
				is_incapable = no
				num_of_rivals < 2
				health_traits == 0

				NOR = {
					is_friend = ROOT
					is_rival = ROOT
					trait = martial_lady
					trait = martial_lady_pagan
					trait = martial_lady_tengri
				}
			}

			add_rival = ROOT
		}

		ai_chance = { factor = 70 }
	}

	option = {
		name = EVTOPTB_FemRule_152 # I will grit my teeth and hold my tongue

		ai_chance = {
			factor = 30

			trigger = {
				NOT = { trait = wroth }
			}
		}

		random_courtier = {
			show_scope_change = no

			limit = {
				is_female = yes
				religion = ROOT
				prisoner = no
				is_adult = yes
				is_abroad = no
				is_incapable = no
				num_of_friends < 2
				health_traits == 0

				NOR = {
					is_friend = ROOT
					is_rival = ROOT
					trait = martial_lady
					trait = martial_lady_pagan
					trait = martial_lady_tengri
				}
			}

			reverse_opinion = {
				name = opinion_irritated
				who = ROOT
				years = 2
			}
		}

		random = {
			chance = 20
			add_trait_partially_patient_effect = yes
		}

		random = {
			chance = 20
			add_trait_stressed_effect = yes
		}
	}
}