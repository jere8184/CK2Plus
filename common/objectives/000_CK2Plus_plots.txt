##################
#Plus Plots:
#
#Total = 16
##################

# Character plots to lower skill of a councillor whose job they want
plot_discredit_councillor = {
	type = realm_characters # All characters in the same realm, plus rivals and relatives of self, parents, children and spouse
	intrigue_plot = yes

	# Plotter scope
	potential = {
		is_adult = yes

		OR = {
			diplomacy >= 10
			stewardship >= 10
			intrigue >= 10
			martial >= 10
			learning >= 10
		}

		prisoner = no
		independent = no
		is_incapable = no
		is_councillor = no

		liege = {
			NOR = {
				has_law = council_privileges_1
				has_character_flag = no_council_requests
			}
		}

		NOT = {
			has_opinion_modifier = {
				name = opinion_refused_council
				who = liege
			}
		}

	#	trigger_if = {
	#		limit = { ai = yes }
	#		has_character_flag = allow_plotting
	#	}
	}

	# Target scope
	target_potential = {
		same_liege = FROM
		is_councillor = yes
	}

	# Target scope
	allow = {
		NOT = {
			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}

			liege = { is_married = FROM }
		}

		OR = {
			# Chancellor
			AND = {
				has_job_title = job_chancellor

				attribute_diff = {
					character = FROM
					attribute = diplomacy
					value < 5
				}

				FROM = {
					diplomacy >= 10
					can_be_chancellor_trigger = yes
				}
			}

			# Steward
			AND = {
				has_job_title = job_treasurer

				attribute_diff = {
					character = FROM
					attribute = stewardship
					value < 5
				}

				FROM = {
					stewardship >= 10
					can_be_treasurer_trigger = yes
				}
			}

			# Spymaster
			AND = {
				has_job_title = job_spymaster

				attribute_diff = {
					character = FROM
					attribute = intrigue
					value < 5
				}

				FROM = {
					intrigue >= 10
					can_be_spymaster_trigger = yes
				}
			}

			# Marshal
			AND = {
				has_job_title = job_marshal

				attribute_diff = {
					character = FROM
					attribute = martial
					value < 5
				}

				FROM = {
					martial >= 10
					can_be_marshal_trigger = yes
				}
			}

			# Court chaplain
			AND = {
				has_job_title = job_spiritual

				attribute_diff = {
					character = FROM
					attribute = learning
					value < 5
				}

				FROM = {
					learning >= 10
					can_be_spiritual_trigger = yes
				}
			}
		}
	}

	success = {
		custom_tooltip = {
			text = CUSTOMTOOLTIP29
			always = no # Handled by event
		}
	}

	effect = {
		FROM = {
			show_scope_change = no

			any_plot_backer = {
				show_scope_change = no

				reverse_opinion = {
					name  = opinion_grateful
					who = FROM
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}

			# Clear flags
			hidden_effect = {
				clr_character_flag = event7040
				clr_character_flag = allow_plotting

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 5
				}

				change_variable = {
					which = lifestyle_intrigue
					value = 1
				}
			}
		}
	}

	abort = {
		OR = {
			FROM = {
				OR = {
					is_councillor = yes
					prisoner = yes
					is_incapable = yes
				}
			}

			AND = {
				is_councillor = no
				FROM = { is_plot_active = no }
			}

			is_alive = no
		}
	}

	abort_effect = {
		FROM = {
			# Clear flags
			hidden_effect = {
				clr_character_flag = event7040
				clr_character_flag = allow_plotting

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}
		}
	}

	chance = {
		factor = 1

		trigger = {
			trigger_if = {
				limit = { FROM = { ai = yes } }

				FROM = {
					NOR = {
						trait = content
						trait = honest
						trait = kind
						trait = just
						trait = charitable
					}

					opinion = {
						who = ROOT
						value < 50
					}
				}
			}
		}

		mult_modifier = {
			factor = 10

			FROM = {
				OR = {
					has_ambition = obj_become_chancellor
					has_ambition = obj_become_marshal
					has_ambition = obj_become_treasurer
					has_ambition = obj_become_spymaster
					has_ambition = obj_become_spiritual
				}
			}
		}

		mult_modifier = {
			factor = 10
			is_rival = FROM
		}

		mult_modifier = {
			factor = 0.5
			is_close_relative = FROM
		}

		mult_modifier = {
			factor = 0.25

			reverse_opinion = {
				who = ROOT
				value >= 25
			}
		}

		mult_modifier = {
			factor = 1.5

			reverse_opinion = {
				who = ROOT
				value < -25
			}
		}

		mult_modifier = {
			factor = 1.5

			reverse_opinion = {
				who = ROOT
				value < -50
			}
		}

		mult_modifier = {
			factor = 2.0

			reverse_opinion = {
				who = ROOT
				value < -75
			}
		}

		mult_modifier = {
			factor = 0.5
			FROM = { intrigue < 5 }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { intrigue < 10 }
		}

		mult_modifier = {
			factor = 2
			FROM = { intrigue >= 15 }
		}

		mult_modifier = {
			factor = 2
			FROM = { intrigue >= 20 }
		}

		mult_modifier = {
			factor = 2.0
			FROM = { trait = envious }
		}

		mult_modifier = {
			factor = 4.0
			FROM = { trait = ambitious }
		}
	}
}

# Character plots to steal from liege
plot_embezzle_from_liege = {
	type = realm_characters # All characters in the same realm, plus rivals and relatives of self, parents, children and spouse
	intrigue_plot = yes

	# Plotter scope
	potential = {
		is_councillor = yes
		is_adult = yes
		prisoner = no
		independent = no
		is_incapable = no

	#	trigger_if = {
	#		limit = { ai = yes }
	#		has_character_flag = allow_plotting
	#	}
	}

	# Target scope
	target_potential = {
		is_liege_of = FROM
	}

	# Target allow trigger for when players target a specific character in the GUI
	player_allow = {
		wealth >= 0

		NOT = {
			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}
		}
	}

	# Target scope
	allow = {
		wealth >= 0

		NOT = {
			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}
		}
	}

	success = {
		custom_tooltip = {
			text = CUSTOMTOOLTIP30
			always = no # Handled by event
		}
	}

	effect = {
		FROM = {
			show_scope_change = no

			any_plot_backer = {
				show_scope_change = no

				reverse_opinion = {
					name = opinion_grateful
					who = FROM
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}

			# Clear flags
			hidden_effect = {
				clr_character_flag = event7040
				clr_character_flag = allow_plotting

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 5
				}

				change_variable = {
					which = lifestyle_intrigue
					value = 1
				}
			}
		}
	}

	abort = {
		OR = {
			treasury < -100

			FROM = {
				OR = {
					prisoner = yes
					is_incapable = yes
					is_councillor = no
				}
			}

			NOT = { is_liege_of = FROM }
			is_ruler = no
			is_alive = no
		}
	}

	abort_effect = {
		FROM = {
			# Clear flags
			hidden_effect = {
				clr_character_flag = event7040
				clr_character_flag = allow_plotting

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}
		}
	}

	chance = {
		factor = 1

		trigger = {
			trigger_if = {
				limit = { FROM = { ai = yes } }

				FROM = {
					NOR = {
						trait = content
						trait = honest
						trait = kind
						trait = just
						trait = charitable
					}

					trigger_if = {
						limit = {
							OR = {
								trait = greedy
								trait = envious
							}
						}

						opinion = {
							who = ROOT
							value < 50
						}
					}
					trigger_else = {
						opinion = {
							who = ROOT
							value < 25
						}
					}
				}

				trigger_if = {
					limit = { war = yes }
					wealth >= 500
				}
			}
		}

		mult_modifier = {
			factor = 0.25
			FROM = { is_ruler = yes }
		}

		mult_modifier = {
			factor = 0.25

			FROM = {
				NOR = {
					trait = greedy
					trait = envious
				}

				opinion = {
					who = ROOT
					value >= 0
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			reverse_opinion = {
				who = ROOT
				value < -25
			}
		}

		mult_modifier = {
			factor = 1.5

			reverse_opinion = {
				who = ROOT
				value < -50
			}
		}

		mult_modifier = {
			factor = 2.0

			reverse_opinion = {
				who = ROOT
				value < -75
			}
		}

		mult_modifier = {
			factor = 10.0
			FROM = { has_ambition = obj_amass_wealth }
		}

		mult_modifier = {
			factor = 2.0
			FROM = { has_job_title = job_treasurer }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { intrigue < 5 }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { intrigue < 10 }
		}

		mult_modifier = {
			factor = 2
			FROM = { intrigue >= 15 }
		}

		mult_modifier = {
			factor = 2
			FROM = { intrigue >= 20 }
		}

		mult_modifier = {
			factor = 2.0
			FROM = { trait = envious }
		}

		mult_modifier = {
			factor = 4.0
			FROM = { trait = greedy }
		}

		mult_modifier = {
			factor = 4.0
			FROM = { trait = decadent }
		}

		mult_modifier = {
			factor = 2
			trait = trusting
		}

		mult_modifier = {
			factor = 1.5
			trait = charitable
		}

		mult_modifier = {
			factor = 1.5
			wealth >= 100
		}

		mult_modifier = {
			factor = 1.5
			wealth >= 200
		}

		mult_modifier = {
			factor = 1.5
			wealth >= 300
		}

		mult_modifier = {
			factor = 1.5
			wealth >= 400
		}

		mult_modifier = {
			factor = 1.5
			wealth >= 500
		}

		mult_modifier = {
			factor = 0.5
			wealth < 50
		}
	}
}

# Character plots to imprison a character
plot_kidnapping = {
	type = realm_characters_plus # All characters in the same realm, plus rivals and relatives of self, parents, children and spouse
	intrigue_plot = yes
	murder_plot = yes

	# Plotter scope
	potential = {
		is_ruler = yes
		is_adult = yes
		prisoner = no
		is_incapable = no

	#	trigger_if = {
	#		limit = { ai = yes }
	#		has_character_flag = allow_plotting
	#	}
	}

	# Target allow trigger for when players target a specific character in the GUI
	player_allow = {
		is_within_diplo_range = FROM
		prisoner = no

		NOT = {
			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}
		}
	}

	# Target scope
	allow = {
		OR = {
			# Declared war on me
			any_war = {
				attacker = { character = ROOT }
				defender = { character = FROM }
			}

			any_war = {
				attacker = { character = FROM }
				defender = { character = ROOT }
			}

			# Has my de jure vassal in a kingdom where inter-vassal fighting isn't allowed
			AND = {
				same_liege = FROM

				FROM = {
					liege = {
						NOR = {
							is_mother = ROOT
							is_father = ROOT
							is_child_of = ROOT
							sibling = ROOT
							is_married = ROOT
						}
					}
				}

				any_vassal = {
					lower_real_tier_than = FROM
					higher_real_tier_than = BARON

					OR = {
						de_jure_liege = FROM

						dejure_liege_title = {
							has_holder = yes
							claimed_by = FROM
						}
					}

					war = no
					is_patrician = no
				}
			}

			# Holds a county claim of mine in a kingdom where inter-vassal fighting isn't allowed
			AND = {
				same_liege = FROM

				FROM = {
					liege = {
						NOR = {
							is_parent_of = ROOT
							is_child_of = ROOT
							sibling = ROOT
							is_married = ROOT
						}
					}
				}

				any_demesne_title = {
					lower_real_tier_than = DUKE
					can_be_given_away = yes
					is_primary_holder_title = no
					location = { is_capital = no }

					OR = {
						claimed_by = FROM
						dejure_liege_title = { claimed_by = FROM }
						de_jure_liege_or_above = FROM
					}
				}
			}

			# I need to stop their plot but can't arrest them
			FROM = {
				any_known_plotter = {
					character = ROOT

					plot_target_char = {
						OR = {
							character = PREVPREV
							is_child_of = PREVPREV
							is_parent_of = PREVPREV
							is_married = PREVPREV
						}
					}
				}

				liege = {
					NOR = {
						is_parent_of = ROOT
						is_child_of = ROOT
						sibling = ROOT
						is_married = ROOT
					}
				}

				NOT = { is_liege_or_above_of = ROOT }
			}

			# I want to execute them but can't arrest them
			AND = {
				NOT = { is_vassal_or_below_of = FROM }

				OR = {
					reverse_has_opinion_modifier = { who = FROM name = opinion_targeted_by_adventurer }
					reverse_has_opinion_modifier = { who = FROM name = opinion_traitor }
					reverse_has_opinion_modifier = { who = FROM name = declared_war }
					reverse_has_opinion_modifier = { who = FROM name = opinion_dishonorable }
					reverse_has_opinion_modifier = { who = FROM name = opinion_rebel_traitor }
					reverse_has_opinion_modifier = { who = FROM name = attempted_murder_of_spouse }
					reverse_has_opinion_modifier = { who = FROM name = attempted_murder_of_vassal }
					reverse_has_opinion_modifier = { who = FROM name = attempted_murder }
					reverse_has_opinion_modifier = { who = FROM name = attempted_murder_of_child }
					reverse_has_opinion_modifier = { who = FROM name = opinion_spouse_slayer }
					reverse_has_opinion_modifier = { who = FROM name = opinion_murder_attempt }
					reverse_has_opinion_modifier = { who = FROM name = opinion_killed_close_kin }
					reverse_has_opinion_modifier = { who = FROM name = opinion_witch }
					reverse_has_opinion_modifier = { who = FROM name = opinion_takfir }
					reverse_has_opinion_modifier = { who = FROM name = attempted_murder_of_close_kin }
					reverse_has_opinion_modifier = { who = FROM name = killed_vassal }
					reverse_has_opinion_modifier = { who = FROM name = opinion_civil_war_loser }
					reverse_has_opinion_modifier = { who = FROM name = devious_plotter }
					reverse_has_opinion_modifier = { who = FROM name = attempted_kidnapping }
				}
			}
		}

		prisoner = no
		is_within_diplo_range = FROM

		NOT = {
			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}
		}

		trigger_if = {
			limit = { is_close_relative = FROM }

			reverse_opinion = {
				who = FROM
				value < -25
			}
		}
		trigger_else = {
			reverse_opinion = {
				who = FROM
				value <= 0
			}
		}
	}

	success = {
		prisoner = yes
		host = { character = FROM }
	}

	effect = {
		FROM = {
			show_scope_change = no

			any_plot_backer = {
				show_scope_change = no

				reverse_opinion = {
					name = opinion_grateful
					who = FROM
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}

			# Clear flags
			hidden_effect = {
				clr_character_flag = event7040
				clr_character_flag = allow_plotting
				clr_character_flag = kidnap_in_transit
				clr_character_flag = kidnap_in_bed
				clr_character_flag = kidnap_while_hunting
				clr_character_flag = kidnap_while_carousing

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 5
				}

				change_variable = {
					which = lifestyle_intrigue
					value = 1
				}
			}
		}
	}

	abort = {
		OR = {
			AND = {
				prisoner = yes
				host = { NOT = { character = FROM } }
			}

			FROM = {
				OR = {
					prisoner = yes
					is_incapable = yes
					is_ruler = no
				}
			}

			AND = {
				FROM = { ai = yes }

				NOR = {
					# Declared war on me
					any_war = {
						attacker = { character = ROOT }
						defender = { character = FROM }
					}

					any_war = {
						attacker = { character = FROM }
						defender = { character = ROOT }
					}

					# Holds a county claim of mine in a kingdom where inter-vassal fighting isn't allowed
					AND = {
						same_liege = FROM

						FROM = {
							crownlaw_title = {
								OR = {
									has_law = crown_authority_3
									has_law = crown_authority_4
								}
							}
						}

						any_demesne_title = {
							lower_real_tier_than = DUKE
							can_be_given_away = yes
							is_primary_holder_title = no
							location = { is_capital = no }

							OR = {
								claimed_by = FROM
								dejure_liege_title = { claimed_by = FROM }
								de_jure_liege_or_above = FROM
							}
						}
					}

					# I need to stop their plot but can't arrest them
					AND = {
						NOT = { is_vassal_or_below_of = FROM }

						FROM = {
							any_known_plotter = {
								character = ROOT

								plot_target_char = {
									OR = {
										character = PREVPREV
										is_child_of = PREVPREV
										is_parent_of = PREVPREV
										is_married = PREVPREV
									}
								}
							}
						}
					}

					# I want to execute them but can't arrest them

					AND = {
						NOT = { is_vassal_or_below_of = FROM }

						OR = {
							reverse_has_opinion_modifier = { who = FROM name = opinion_targeted_by_adventurer }
							reverse_has_opinion_modifier = { who = FROM name = opinion_traitor }
							reverse_has_opinion_modifier = { who = FROM name = declared_war }
							reverse_has_opinion_modifier = { who = FROM name = opinion_dishonorable }
							reverse_has_opinion_modifier = { who = FROM name = opinion_rebel_traitor }
							reverse_has_opinion_modifier = { who = FROM name = attempted_murder_of_spouse }
							reverse_has_opinion_modifier = { who = FROM name = attempted_murder_of_vassal }
							reverse_has_opinion_modifier = { who = FROM name = attempted_murder }
							reverse_has_opinion_modifier = { who = FROM name = attempted_murder_of_child }
							reverse_has_opinion_modifier = { who = FROM name = opinion_spouse_slayer }
							reverse_has_opinion_modifier = { who = FROM name = opinion_murder_attempt }
							reverse_has_opinion_modifier = { who = FROM name = opinion_killed_close_kin }
							reverse_has_opinion_modifier = { who = FROM name = opinion_witch }
							reverse_has_opinion_modifier = { who = FROM name = opinion_takfir }
							reverse_has_opinion_modifier = { who = FROM name = attempted_murder_of_close_kin }
							reverse_has_opinion_modifier = { who = FROM name = killed_vassal }
							reverse_has_opinion_modifier = { who = FROM name = opinion_civil_war_loser }
							reverse_has_opinion_modifier = { who = FROM name = devious_plotter }
							reverse_has_opinion_modifier = { who = FROM name = attempted_kidnapping }
							reverse_has_opinion_modifier = { who = FROM name = attempted_kidnapping_of_kin }
							reverse_has_opinion_modifier = { who = FROM name = attempted_kidnapping_of_vassal }
							reverse_has_opinion_modifier = { who = FROM name = opinion_kidnapped_kin }
						}
					}
				}
			}
		}
	}

	abort_effect = {
		FROM = {
			# Clear flags
			hidden_effect = {
				clr_character_flag = event7040
				clr_character_flag = allow_plotting
				clr_character_flag = kidnap_in_transit
				clr_character_flag = kidnap_in_bed
				clr_character_flag = kidnap_while_hunting
				clr_character_flag = kidnap_while_carousing

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}
		}
	}

	chance = {
		factor = 1

		trigger = {
			trigger_if = {
				limit = { FROM = { ai = yes } }

				FROM = {
					intrigue >= 6

					NOR = {
						trait = kind
						trait = craven
						trait = content
						trait = humble
					}

					trigger_if = {
						limit = {
							OR = {
								trait = honest
								trait = just
								trait = humble
							}
						}

						ROOT = {
							OR = {
								any_war = {
									attacker = { character = ROOT }
									defender = { character = FROM }
								}

								any_war = {
									attacker = { character = FROM }
									defender = { character = ROOT }
								}

								FROM = {
									any_known_plotter = {
										character = ROOT

										plot_target_char = {
											OR = {
												character = PREVPREV
												is_child_of = PREVPREV
												is_mother = PREVPREV
												is_father = PREVPREV
												is_married = PREVPREV
											}
										}
									}
								}

								reverse_has_opinion_modifier = { who = FROM name = opinion_targeted_by_adventurer }
								reverse_has_opinion_modifier = { who = FROM name = opinion_traitor }
								reverse_has_opinion_modifier = { who = FROM name = declared_war }
								reverse_has_opinion_modifier = { who = FROM name = opinion_dishonorable }
								reverse_has_opinion_modifier = { who = FROM name = opinion_rebel_traitor }
								reverse_has_opinion_modifier = { who = FROM name = attempted_murder_of_spouse }
								reverse_has_opinion_modifier = { who = FROM name = attempted_murder_of_vassal }
								reverse_has_opinion_modifier = { who = FROM name = attempted_murder }
								reverse_has_opinion_modifier = { who = FROM name = attempted_murder_of_child }
								reverse_has_opinion_modifier = { who = FROM name = opinion_spouse_slayer }
								reverse_has_opinion_modifier = { who = FROM name = opinion_murder_attempt }
								reverse_has_opinion_modifier = { who = FROM name = opinion_killed_close_kin }
								reverse_has_opinion_modifier = { who = FROM name = opinion_witch }
								reverse_has_opinion_modifier = { who = FROM name = opinion_takfir }
								reverse_has_opinion_modifier = { who = FROM name = attempted_murder_of_close_kin }
								reverse_has_opinion_modifier = { who = FROM name = killed_vassal }
								reverse_has_opinion_modifier = { who = FROM name = opinion_civil_war_loser }
								reverse_has_opinion_modifier = { who = FROM name = devious_plotter }
								reverse_has_opinion_modifier = { who = FROM name = attempted_kidnapping }
							}
						}
					}
				}
			}
		}

		mult_modifier = {
			factor = 2.0

			FROM = {
				OR = {
					trait = wroth
					trait = just
					trait = diligent
				}
			}

			OR = {
				any_war = {
					attacker = { character = ROOT }
					defender = { character = FROM }
				}

				any_war = {
					attacker = { character = FROM }
					defender = { character = ROOT }
				}

				FROM = {
					any_known_plotter = {
						character = ROOT

						plot_target_char = {
							OR = {
								character = PREVPREV
								is_child_of = PREVPREV
								is_parent_of = PREVPREV
								is_married = PREVPREV
							}
						}
					}
				}

				reverse_has_opinion_modifier = { who = FROM name = opinion_targeted_by_adventurer }
				reverse_has_opinion_modifier = { who = FROM name = opinion_traitor }
				reverse_has_opinion_modifier = { who = FROM name = declared_war }
				reverse_has_opinion_modifier = { who = FROM name = opinion_dishonorable }
				reverse_has_opinion_modifier = { who = FROM name = opinion_rebel_traitor }
				reverse_has_opinion_modifier = { who = FROM name = attempted_murder_of_spouse }
				reverse_has_opinion_modifier = { who = FROM name = attempted_murder_of_vassal }
				reverse_has_opinion_modifier = { who = FROM name = attempted_murder }
				reverse_has_opinion_modifier = { who = FROM name = attempted_murder_of_child }
				reverse_has_opinion_modifier = { who = FROM name = opinion_spouse_slayer }
				reverse_has_opinion_modifier = { who = FROM name = opinion_murder_attempt }
				reverse_has_opinion_modifier = { who = FROM name = opinion_killed_close_kin }
				reverse_has_opinion_modifier = { who = FROM name = opinion_witch }
				reverse_has_opinion_modifier = { who = FROM name = opinion_takfir }
				reverse_has_opinion_modifier = { who = FROM name = attempted_murder_of_close_kin }
				reverse_has_opinion_modifier = { who = FROM name = killed_vassal }
				reverse_has_opinion_modifier = { who = FROM name = opinion_civil_war_loser }
				reverse_has_opinion_modifier = { who = FROM name = devious_plotter }
				reverse_has_opinion_modifier = { who = FROM name = attempted_kidnapping }
			}
		}

		mult_modifier = {
			factor = 0.25

			FROM = {
				NOT = {
					crownlaw_title = {
						OR = {
							has_law = crown_authority_3
							has_law = crown_authority_4
						}
					}
				}
			}

			NOR = {
				any_war = {
					attacker = { character = ROOT }
					defender = { character = FROM }
				}

				any_war = {
					attacker = { character = FROM }
					defender = { character = ROOT }
				}

				FROM = {
					any_known_plotter = {
						character = ROOT

						plot_target_char = {
							OR = {
								character = PREVPREV
								is_child_of = PREVPREV
								is_mother = PREVPREV
								is_father = PREVPREV
								is_married = PREVPREV
							}
						}
					}
				}

				reverse_has_opinion_modifier = { who = FROM name = opinion_targeted_by_adventurer }
				reverse_has_opinion_modifier = { who = FROM name = opinion_traitor }
				reverse_has_opinion_modifier = { who = FROM name = declared_war }
				reverse_has_opinion_modifier = { who = FROM name = opinion_dishonorable }
				reverse_has_opinion_modifier = { who = FROM name = opinion_rebel_traitor }
				reverse_has_opinion_modifier = { who = FROM name = attempted_murder_of_spouse }
				reverse_has_opinion_modifier = { who = FROM name = attempted_murder_of_vassal }
				reverse_has_opinion_modifier = { who = FROM name = attempted_murder }
				reverse_has_opinion_modifier = { who = FROM name = attempted_murder_of_child }
				reverse_has_opinion_modifier = { who = FROM name = opinion_spouse_slayer }
				reverse_has_opinion_modifier = { who = FROM name = opinion_murder_attempt }
				reverse_has_opinion_modifier = { who = FROM name = opinion_killed_close_kin }
				reverse_has_opinion_modifier = { who = FROM name = opinion_witch }
				reverse_has_opinion_modifier = { who = FROM name = opinion_takfir }
				reverse_has_opinion_modifier = { who = FROM name = attempted_murder_of_close_kin }
				reverse_has_opinion_modifier = { who = FROM name = killed_vassal }
				reverse_has_opinion_modifier = { who = FROM name = opinion_civil_war_loser }
				reverse_has_opinion_modifier = { who = FROM name = devious_plotter }
				reverse_has_opinion_modifier = { who = FROM name = attempted_kidnapping }
			}
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = cruel }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = wroth }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = brave }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = deceitful }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = humble }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = patient }
		}

		mult_modifier = {
			factor = 0.5

			FROM = { trait = just }
			same_liege = FROM

			OR = {
				any_vassal = {
					lower_tier_than = FROM

					OR = {
						de_jure_liege = FROM
						dejure_liege_title = { claimed_by = FROM }
					}

					war = no
					is_patrician = no
				}

				any_demesne_title = {
					lower_tier_than = DUKE
					can_be_given_away = yes
					is_primary_holder_title = no
					location = { is_capital = no }

					OR = {
						claimed_by = FROM
						dejure_liege_title = { claimed_by = FROM }
						de_jure_liege_or_above = FROM
					}
				}
			}

			liege = {
				NOR = {
					is_parent_of = ROOT
					is_child_of = ROOT
					sibling = ROOT
					is_married = ROOT
				}
			}
		}

		mult_modifier = {
			factor = 2.0

			FROM = { trait = ambitious }
			same_liege = FROM

			liege = {
				NOR = {
					is_parent_of = ROOT
					is_child_of = ROOT
					sibling = ROOT
					is_married = ROOT
				}
			}

			OR = {
				any_vassal = {
					lower_real_tier_than = FROM

					OR = {
						de_jure_liege = FROM
						dejure_liege_title = { claimed_by = FROM }
					}

					war = no
					is_patrician = no
				}

				any_demesne_title = {
					lower_tier_than = DUKE
					can_be_given_away = yes
					is_primary_holder_title = no
					location = { is_capital = no }

					OR = {
						claimed_by = FROM
						dejure_liege_title = { claimed_by = FROM }
						de_jure_liege_or_above = FROM
					}
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			same_liege = FROM

			FROM = {
				OR = {
					trait = envious
					trait = greedy
				}
			}

			OR = {
				any_vassal = {
					lower_real_tier_than = FROM

					OR = {
						de_jure_liege = FROM
						dejure_liege_title = { claimed_by = FROM }
					}

					war = no
					is_patrician = no
				}

				any_demesne_title = {
					lower_tier_than = DUKE
					can_be_given_away = yes
					is_primary_holder_title = no
					location = { is_capital = no }

					OR = {
						claimed_by = FROM
						dejure_liege_title = { claimed_by = FROM }
						de_jure_liege_or_above = FROM
					}
				}
			}

			liege = {
				NOR = {
					is_parent_of = ROOT
					is_child_of = ROOT
					sibling = ROOT
					is_married = ROOT
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			reverse_opinion = {
				who = FROM
				value < -50
			}
		}

		mult_modifier = {
			factor = 1.5

			reverse_opinion = {
				who = FROM
				value < -75
			}
		}

		mult_modifier = {
			factor = 0.75
			FROM = { intrigue < 7 }
		}

		mult_modifier = {
			factor = 0.75
			FROM = { intrigue < 9 }
		}

		mult_modifier = {
			factor = 1.25
			FROM = { intrigue >= 12 }
		}

		mult_modifier = {
			factor = 1.25
			FROM = { intrigue >= 15 }
		}

		mult_modifier = {
			factor = 1.25
			FROM = { intrigue >= 18 }
		}
	}
}

# Character plots to fabricate evidence of treason
plot_fabricate_treason = {
	type = realm_characters # All characters in the same realm, plus rivals and relatives of self, parents, children and spouse
	vassal_intrigue_plot = yes

	# Plotter scope
	potential = {
		is_playable = yes
		is_adult = yes
		prisoner = no
		is_incapable = no

	#	trigger_if = {
	#		limit = { ai = yes }
	#		has_character_flag = allow_plotting
	#	}
	}

	# Target scope
	target_potential = {
		same_liege = FROM
		is_ruler = yes
	}

	# Target allow trigger for when players target a specific character in the GUI
	player_allow = {
		is_playable = yes
		is_adult = yes
		prisoner = no
		independent = no

		NOR = {
			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}

			vassal_of = FROM
			reverse_has_truce = FROM
			has_non_aggression_pact_with = FROM

			liege = {
				opinion = {
					who = ROOT
					value >= 25
				}
			}
		}
	}

	# Target scope
	allow = {
		is_playable = yes
		is_adult = yes
		prisoner = no
		independent = no

		NOR = {
			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}

			vassal_of = FROM
			reverse_has_truce = FROM
			is_allied_with = FROM
			has_non_aggression_pact_with = FROM

			liege = {
				opinion = {
					who = ROOT
					value >= 25
				}
			}
		}

		OR = {
			# At war
			war_with = FROM

			# Are rivals
			is_rival = FROM

			# Have a claim on their lands
			any_demesne_title = {
				claimed_by = FROM
			}

			AND = {
				OR = {
					# They are a different culture from both you and their liege
					NOR = {
						culture = FROM
						culture = liege
					}

					# They are a different religion from both you and their liege
					NOR = {
						religion = FROM
						religion = liege
					}
				}

				reverse_opinion = {
					who = FROM
					value < 0
				}
			}

			# Wants revenge
			FROM = {
				OR = {
					has_opinion_modifier = { who = ROOT name = scheming_bastard }
					has_opinion_modifier = { who = ROOT name = devious_plotter }
					has_opinion_modifier = { who = ROOT name = declared_war }
				}
			}

			# Dislike them, and liege really dislikes them
			AND = {
				reverse_opinion = {
					who = FROM
					value < 0
				}

				reverse_opinion = {
					who = liege
					value < -50
				}
			}
		}
	}

	success = {
		custom_tooltip = {
			text = CUSTOMTOOLTIP31
			always = no # Handled by event
		}
	}

	effect = {
		FROM = {
			show_scope_change = no

			any_plot_backer = {
				show_scope_change = no

				reverse_opinion = {
					name = opinion_grateful
					who = FROM
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}

			# Clear flags
			hidden_effect = {
				clr_character_flag = event7040
				clr_character_flag = allow_plotting

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 5
				}

				change_variable = {
					which = lifestyle_intrigue
					value = 1
				}
			}
		}
	}

	abort = {
		OR = {
			FROM = {
				OR = {
					prisoner = yes
					is_incapable = yes
				}
			}

			NOT = { same_liege = FROM }
			vassal_of = FROM
			independent = yes
			prisoner = yes
			is_alive = no

			reverse_opinion = {
				who = liege
				value >= 50
			}
		}
	}

	abort_effect = {
		FROM = {
			# Clear flags
			hidden_effect = {
				clr_character_flag = event7040
				clr_character_flag = allow_plotting

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}
		}
	}

	chance = {
		factor = 1

		trigger = {
			trigger_if = {
				limit = { FROM = { ai = yes } }

				FROM = {
					higher_real_tier_than = BARON

					trigger_if = {
						limit = {
							OR = {
								trait = content
								trait = honest
								trait = kind
								trait = just
								trait = charitable
							}
						}

						OR = {
							trait = lunatic
							trait = possessed
						}
					}

					NOR = {
						trait = dishonorable6
						trait = dishonorable7
						trait = dishonorable8
						trait = dishonorable9
						trait = dishonorable10
					}

					trigger_if = {
						limit = { independent = no }

						reverse_opinion = {
							who = liege
							value >= -50
						}
					}

					trigger_if = {
						limit = {
							OR = {
								trait = lunatic
								trait = possessed
								trait = ambitious
								trait = deceitful
								trait = paranoid
							}
						}

						opinion = {
							who = ROOT
							value < 0
						}
					}
					trigger_else = {
						opinion = {
							who = ROOT
							value < -25
						}
					}
				}
			}
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = dishonorable1 }
		}

		mult_modifier = {
			factor = 0.4
			FROM = { trait = dishonorable2 }
		}

		mult_modifier = {
			factor = 0.3
			FROM = { trait = dishonorable3 }
		}

		mult_modifier = {
			factor = 0.2
			FROM = { trait = dishonorable4 }
		}

		mult_modifier = {
			factor = 0.1
			FROM = { trait = dishonorable5 }
		}

		mult_modifier = {
			factor = 2.0

			FROM = {
				independent = no

				reverse_opinion = {
					who = liege
					value >= 100
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			FROM = {
				independent = no

				reverse_opinion = {
					who = liege
					value >= 75
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			FROM = {
				independent = no

				reverse_opinion = {
					who = liege
					value >= 50
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			FROM = {
				independent = no

				reverse_opinion = {
					who = liege
					value >= 25
				}
			}
		}

		mult_modifier = {
			factor = 0.5

			FROM = {
				independent = no

				reverse_opinion = {
					who = liege
					value < 0
				}
			}
		}

		mult_modifier = {
			factor = 0.25

			FROM = {
				independent = no

				reverse_opinion = {
					who = liege
					value < -25
				}
			}
		}

		mult_modifier = {
			factor = 2.0

			reverse_opinion = {
				who = FROM
				value < -50
			}
		}

		mult_modifier = {
			factor = 2.0

			reverse_opinion = {
				who = FROM
				value < -75
			}
		}

		mult_modifier = {
			factor = 0.5
			FROM = { intrigue < 5 }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { intrigue < 10 }
		}

		mult_modifier = {
			factor = 2
			FROM = { intrigue >= 15 }
		}

		mult_modifier = {
			factor = 2
			FROM = { intrigue >= 20 }
		}

		mult_modifier = {
			factor = 2.0
			FROM = { trait = paranoid }
		}

		mult_modifier = {
			factor = 4.0
			FROM = { trait = deceitful }
		}
	}
}

# Character plots to fabricate evidence of treason
plot_fabricate_treason_liege = {
	type = realm_characters # All characters in the same realm, plus rivals and relatives of self, parents, children and spouse
	intrigue_plot = yes
	murder_plot = yes

	# Plotter scope
	potential = {
		is_playable = yes
		is_adult = yes
		prisoner = no
		is_incapable = no

	#	trigger_if = {
	#		limit = { ai = yes }
	#		has_character_flag = allow_plotting
	#	}
	}

	# Target scope
	target_potential = {
		vassal_of = FROM
		is_ruler = yes
		independent = no
	}

	# Target allow trigger for when players target a specific character in the GUI
	player_allow = {
		is_adult = yes
		prisoner = no

		NOT = {
			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}
		}
	}

	# Target scope
	allow = {
		is_playable = yes
		is_adult = yes
		prisoner = no

		NOR = {
			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}

			reverse_has_truce = FROM
			is_allied_with = FROM
			has_non_aggression_pact_with = FROM

			liege = {
				opinion = {
					who = ROOT
					value >= 25
				}
			}
		}

		OR = {
			# At war
			war_with = FROM

			# Are rivals
			is_rival = FROM

			# Have a claim on their lands
			any_demesne_title = {
				claimed_by = FROM
			}

			AND = {
				OR = {
					# They are a different culture from both you and their liege
					NOR = {
						culture = FROM
						culture = liege
					}

					# They are a different religion from both you and their liege
					NOR = {
						religion = FROM
						religion = liege
					}
				}

				reverse_opinion = {
					who = FROM
					value < 0
				}
			}

			# Wants revenge
			FROM = {
				OR = {
					has_opinion_modifier = { who = ROOT name = scheming_bastard }
					has_opinion_modifier = { who = ROOT name = devious_plotter }
					has_opinion_modifier = { who = ROOT name = declared_war }
				}
			}

			# Dislike them, and liege really dislikes them
			AND = {
				reverse_opinion = {
					who = FROM
					value < 0
				}

				reverse_opinion = {
					who = liege
					value < -50
				}
			}
		}
	}

	success = {
		custom_tooltip = {
			text = CUSTOMTOOLTIP31
			always = no # Handled by event
		}
	}

	effect = {
		FROM = {
			show_scope_change = no

			any_plot_backer = {
				show_scope_change = no

				reverse_opinion = {
					name = opinion_grateful
					who = FROM
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}

			# Clear flags
			hidden_effect = {
				clr_character_flag = event7040
				clr_character_flag = allow_plotting

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 5
				}

				change_variable = {
					which = lifestyle_intrigue
					value = 1
				}
			}
		}
	}

	abort = {
		OR = {
			independent = yes
			prisoner = yes
			is_alive = no
			NOT = { vassal_of = FROM }

			FROM = {
				OR = {
					prisoner = yes
					is_incapable = yes
				}
			}
		}
	}

	abort_effect = {
		FROM = {
			# Clear flags
			hidden_effect = {
				clr_character_flag = event7040
				clr_character_flag = allow_plotting

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}
		}
	}

	chance = {
		factor = 1

		trigger = {
			trigger_if = {
				limit = { FROM = { ai = yes } }

				FROM = {
					higher_real_tier_than = BARON

					trigger_if = {
						limit = {
							OR = {
								trait = content
								trait = honest
								trait = kind
								trait = just
								trait = charitable
							}
						}

						OR = {
							trait = lunatic
							trait = possessed
						}
					}

					NOR = {
						trait = dishonorable6
						trait = dishonorable7
						trait = dishonorable8
						trait = dishonorable9
						trait = dishonorable10
					}

					trigger_if = {
						limit = { independent = no }

						reverse_opinion = {
							who = liege
							value >= -50
						}
					}

					trigger_if = {
						limit = {
							OR = {
								trait = lunatic
								trait = possessed
								trait = ambitious
								trait = deceitful
								trait = paranoid
							}
						}

						opinion = {
							who = ROOT
							value < 0
						}
					}
					trigger_else = {
						opinion = {
							who = ROOT
							value < -25
						}
					}
				}
			}
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = dishonorable1 }
		}

		mult_modifier = {
			factor = 0.4
			FROM = { trait = dishonorable2 }
		}

		mult_modifier = {
			factor = 0.3
			FROM = { trait = dishonorable3 }
		}

		mult_modifier = {
			factor = 0.2
			FROM = { trait = dishonorable4 }
		}

		mult_modifier = {
			factor = 0.1
			FROM = { trait = dishonorable5 }
		}

		mult_modifier = {
			factor = 2.0

			FROM = {
				independent = no

				reverse_opinion = {
					who = liege
					value >= 100
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			FROM = {
				independent = no

				reverse_opinion = {
					who = liege
					value >= 75
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			FROM = {
				independent = no

				reverse_opinion = {
					who = liege
					value >= 50
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			FROM = {
				independent = no

				reverse_opinion = {
					who = liege
					value >= 25
				}
			}
		}

		mult_modifier = {
			factor = 0.5

			FROM = {
				independent = no

				reverse_opinion = {
					who = liege
					value < 0
				}
			}
		}

		mult_modifier = {
			factor = 0.25

			FROM = {
				independent = no

				reverse_opinion = {
					who = liege
					value < -25
				}
			}
		}

		mult_modifier = {
			factor = 2.0

			reverse_opinion = {
				who = FROM
				value < -50
			}
		}

		mult_modifier = {
			factor = 2.0

			reverse_opinion = {
				who = FROM
				value < -75
			}
		}

		mult_modifier = {
			factor = 0.5
			FROM = { intrigue < 5 }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { intrigue < 10 }
		}

		mult_modifier = {
			factor = 2
			FROM = { intrigue >= 15 }
		}

		mult_modifier = {
			factor = 2
			FROM = { intrigue >= 20 }
		}

		mult_modifier = {
			factor = 2.0
			FROM = { trait = paranoid }
		}

		mult_modifier = {
			factor = 4.0
			FROM = { trait = deceitful }
		}
	}
}

# Character plots to fabricate evidence of heresy
plot_fabricate_heresy = {
	type = realm_characters_plus # All characters in the same realm, plus rivals and relatives of self, parents, children and spouse
	intrigue_plot = yes
	murder_plot = yes

	# Plotter scope
	potential = {
		is_ruler = yes
		is_adult = yes
		can_excommunicate_trigger = yes
		rightful_religious_head_scope = { always = yes }
		NOT = { trait = excommunicated }
		piety >= 0
		prisoner = no
		is_incapable = no

	#	trigger_if = {
	#		limit = { ai = yes }
	#		has_character_flag = allow_plotting
	#	}
	}

	# Target scope
	target_potential = {
		religion = FROM
		same_liege = FROM
		controls_religion = no

		NOR = {
			trait = excommunicated
			rightful_religious_head = FROM
			FROM = { rightful_religious_head = ROOT }
		}
	}

	# Target allow trigger for when players target a specific character in the GUI
	player_allow = {
		is_adult = yes
		piety < 250

		rightful_religious_head_scope = {
			opinion = {
				who = ROOT
				value < 0
			}
		}

		NOT = {
			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}
		}
	}

	# Target scope
	allow = {
		is_adult = yes
		is_ruler = yes
		piety < 250

		rightful_religious_head_scope = {
			opinion = {
				who = ROOT
				value < 0
			}
		}

		NOT = {
			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}
		}

		OR = {
			# At war
			war_with = FROM

			# Are rivals
			is_rival = FROM

			# Have a claim on their lands
			any_demesne_title = {
				claimed_by = FROM
			}

			# Dislike them and they are cynical
			AND = {
				trait = cynical
				FROM = { trait = zealous }

				reverse_opinion = {
					who = FROM
					value < 0
				}
			}

			# Wwants revenge
			FROM = {
				OR = {
					has_opinion_modifier = { who = ROOT name = scheming_bastard }
					has_opinion_modifier = { who = ROOT name = devious_plotter }
					has_opinion_modifier = { who = ROOT name = declared_war }
				}
			}
		}
	}

	success = {
		trait = excommunicated

		hidden_trigger = {
			FROM = { is_plot_active = yes }
		}
	}

	effect = {
		FROM = {
			show_scope_change = no

			any_plot_backer = {
				show_scope_change = no

				reverse_opinion = {
					name = opinion_grateful
					who = FROM
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}

			# Clear flags
			hidden_effect = {
				clr_character_flag = event7040
				clr_character_flag = allow_plotting

				reverse_opinion = {
					who = ROOT
					name = opinion_recent_plot
					years = 5
				}

				change_variable = {
					which = lifestyle_intrigue
					value = 1
				}
			}
		}
	}

	abort = {
		OR = {
			is_alive = no
			NOT = { religion = FROM }
			piety >= 500

			trigger_if = {
				limit = { trait = excommunicated }
				FROM = { is_plot_active = no }
			}

			rightful_religious_head_scope = {
				opinion = {
					who = ROOT
					value >= 25
				}
			}

			FROM = {
				OR = {
					trait = excommunicated
					prisoner = yes
					is_incapable = yes
				}
			}
		}
	}

	abort_effect = {
		FROM = {
			# Clear flags
			hidden_effect = {
				clr_character_flag = event7040
				clr_character_flag = allow_plotting

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}
		}
	}

	chance = {
		factor = 1

		trigger = {
			trigger_if = {
				limit = { FROM = { ai = yes } }

				FROM = {
					higher_real_tier_than = BARON

					trigger_if = {
						limit = {
							OR = {
								trait = content
								trait = honest
								trait = kind
								trait = just
								trait = charitable
							}
						}

						OR = {
							trait = lunatic
							trait = possessed
						}
					}

					NOR = {
						trait = dishonorable6
						trait = dishonorable7
						trait = dishonorable8
						trait = dishonorable9
						trait = dishonorable10
					}

					opinion = {
						who = ROOT
						value <= -50
					}

					rightful_religious_head_scope = {
						opinion = {
							who = PREV
							value >= -50
						}
					}
				}
			}
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = dishonorable1 }
		}

		mult_modifier = {
			factor = 0.4
			FROM = { trait = dishonorable2 }
		}

		mult_modifier = {
			factor = 0.3
			FROM = { trait = dishonorable3 }
		}

		mult_modifier = {
			factor = 0.2
			FROM = { trait = dishonorable4 }
		}

		mult_modifier = {
			factor = 0.1
			FROM = { trait = dishonorable5 }
		}

		mult_modifier = {
			factor = 2.0

			FROM = {
				rightful_religious_head_scope = {
					opinion = {
						who = PREV
						value >= 100
					}
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			FROM = {
				rightful_religious_head_scope = {
					opinion = {
						who = PREV
						value >= 75
					}
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			FROM = {
				rightful_religious_head_scope = {
					opinion = {
						who = PREV
						value >= 50
					}
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			FROM = {
				rightful_religious_head_scope = {
					opinion = {
						who = PREV
						value >= 25
					}
				}
			}
		}

		mult_modifier = {
			factor = 0.5

			FROM = {
				rightful_religious_head_scope = {
					opinion = {
						who = PREV
						value < 0
					}
				}
			}
		}

		mult_modifier = {
			factor = 0.25

			FROM = {
				rightful_religious_head_scope = {
					opinion = {
						who = PREV
						value < -25
					}
				}
			}
		}

		mult_modifier = {
			factor = 2.0

			reverse_opinion = {
				who = FROM
				value < -50
			}
		}

		mult_modifier = {
			factor = 2.0

			reverse_opinion = {
				who = FROM
				value < -75
			}
		}

		mult_modifier = {
			factor = 0.5
			FROM = { intrigue < 5 }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { intrigue < 10 }
		}

		mult_modifier = {
			factor = 2
			FROM = { intrigue >= 15 }
		}

		mult_modifier = {
			factor = 2
			FROM = { intrigue >= 20 }
		}

		mult_modifier = {
			factor = 2.0
			FROM = { trait = paranoid }
		}

		mult_modifier = {
			factor = 4.0
			FROM = { trait = zealous }
		}
	}
}

# Kidnap liege and force him to give you a piece of land
plot_kidnap_liege = {
	type = realm_characters # All characters in the same realm, plus rivals and relatives of self, parents, children and spouse
	intrigue_plot = yes
	murder_plot = yes

	# Plotter scope
	potential = {
		is_adult = yes
		prisoner = no
		is_ruler = no
		is_incapable = no

	#	trigger_if = {
	#		limit = { ai = yes }
	#		has_character_flag = allow_plotting
	#	}
	}

	# Target scope
	target_potential = {
		is_liege_or_above_of = FROM
	}

	# Target scope
	allow = {
		any_demesne_title = {
			can_be_given_away = yes
			real_tier = COUNT
			location = { is_capital = no }

			OR = {
				claimed_by = FROM

				FROM = {
					OR = {
						has_opinion_modifier = { who = ROOT name = opinion_denied_title }
						has_opinion_modifier = { who = ROOT name = opinion_broken_title_promise }
						has_opinion_modifier = { who = ROOT name = disinherited_me }
						has_opinion_modifier = { who = ROOT name = succ_law_disinherit }
					}
				}
			}
		}

		NOR = {
			is_married = FROM
			has_opinion_modifier = { who = FROM name = opinion_recent_plot }
			has_opinion_modifier = { who = FROM name = kidnapped_me }
		}
	}

	success = {
		FROM = {
			is_plot_active = yes
			is_ruler = yes
		}
	}

	effect = {
		FROM = {
			show_scope_change = no

			any_plot_backer = {
				show_scope_change = no

				reverse_opinion = {
					name = opinion_grateful
					who = FROM
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}

			# Clear flags
			hidden_effect = {
				clr_character_flag = event7040
				clr_character_flag = allow_plotting
				clr_character_flag = kidnap_in_transit
				clr_character_flag = kidnap_in_bed
				clr_character_flag = kidnap_while_hunting
				clr_character_flag = kidnap_while_carousing
				set_character_flag = obj_landed_title

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 5
				}

				change_variable = {
					which = lifestyle_intrigue
					value = 1
				}
			}
		}
	}

	abort = {
		OR = {
			FROM = {
				OR = {
					prisoner = yes
					is_incapable = yes
					is_married = ROOT
					is_ruler = yes
					NOT = { is_liege_or_above_of = FROM }
				}
			}

			NOT = {
				any_demesne_title = {
					can_be_given_away = yes
					tier = COUNT
					location = { is_capital = no }

					OR = {
						claimed_by = FROM

						FROM = {
							OR = {
								has_opinion_modifier = { who = ROOT name = opinion_denied_title }
								has_opinion_modifier = { who = ROOT name = opinion_broken_title_promise }
								has_opinion_modifier = { who = ROOT name = disinherited_me }
								has_opinion_modifier = { who = ROOT name = succ_law_disinherit }
							}
						}
					}
				}
			}
		}
	}

	abort_effect = {
		FROM = {
			# Clear flags
			hidden_effect = {
				clr_character_flag = event7040
				clr_character_flag = allow_plotting
				clr_character_flag = kidnap_in_transit
				clr_character_flag = kidnap_in_bed
				clr_character_flag = kidnap_while_hunting
				clr_character_flag = kidnap_while_carousing
				set_character_flag = obj_landed_title

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}
		}
	}

	chance = {
		factor = 1

		trigger = {
			trigger_if = {
				limit = { FROM = { ai = yes } }

				FROM = {
					intrigue >= 6
					war = no

					trigger_if = {
						limit = {
							NOR = {
								trait = ambitious
								trait = lunatic
								trait = possessed
							}
						}

						any_demesne_title = {
							can_be_given_away = yes
							real_tier = COUNT
							location = { is_capital = no }

							OR = {
								claimed_by = FROM

								FROM = {
									OR = {
										has_opinion_modifier = { who = ROOT name = opinion_denied_title }
										has_opinion_modifier = { who = ROOT name = opinion_broken_title_promise }
										has_opinion_modifier = { who = ROOT name = disinherited_me }
										has_opinion_modifier = { who = ROOT name = succ_law_disinherit }
									}
								}
							}

							trigger_if = {
								limit = { FROM = { is_female = yes } }

								succ_law_title = {
									NOR = {
										has_law = agnatic_succession
										has_law = cognatic_succession
									}
								}
							}
							trigger_else = {
								succ_law_title = {
									NOR = {
										has_law = enatic_succession
										has_law = enatic_cognatic_succession
									}
								}
							}
						}
					}

					trigger_if = {
						limit = { any_heir_title = { always = yes } }

						OR = {
							has_opinion_modifier = { who = ROOT name = opinion_denied_title }
							has_opinion_modifier = { who = ROOT name = opinion_broken_title_promise }
						}
					}

					trigger_if = {
						limit = {
							OR = {
								trait = honest
								trait = humble
								trait = kind
								trait = just
							}
						}

						OR = {
							trait = lunatic
							trait = possessed
						}
					}

					NOR = {
						trait = craven
						trait = imbecile
						trait = content
					}

					opinion = {
						who = ROOT
						value < 50
					}
				}
			}
		}

		mult_modifier = {
			factor = 0.5
			NOT = { vassal_of = FROM }
		}

		mult_modifier = {
			factor = 0.5

			NOT = {
				any_demesne_title = {
					can_be_given_away = yes
					tier = COUNT
					location = { is_capital = no }

					FROM = {
						OR = {
							has_strong_claim = PREV
							has_opinion_modifier = { who = ROOT name = opinion_denied_title }
							has_opinion_modifier = { who = ROOT name = opinion_broken_title_promise }
							has_opinion_modifier = { who = ROOT name = disinherited_me }
							has_opinion_modifier = { who = ROOT name = succ_law_disinherit }
						}
					}
				}
			}
		}

		mult_modifier = {
			factor = 0.5

			FROM = {
				has_character_modifier = estates_1
				NOT = { is_child_of = ROOT }
			}
		}

		mult_modifier = {
			factor = 0.85
			FROM = { has_character_modifier = estates_1 }
		}

		mult_modifier = {
			factor = 2.0
			FROM = { religion_group = muslim }
		}

		mult_modifier = {
			factor = 3.0
			FROM = { trait = decadent }
		}

		mult_modifier = {
			factor = 3.0

			OR = {
				reverse_has_opinion_modifier = { who = FROM name = opinion_broken_title_promise }
				reverse_has_opinion_modifier = { who = FROM name = disinherited_me }
				reverse_has_opinion_modifier = { who = FROM name = succ_law_disinherit }
			}
		}

		mult_modifier = {
			factor = 0.2

			FROM = {
				OR = {
					trait = slow
					trait = dull
				}
			}
		}

		mult_modifier = {
			factor = 0.25

			FROM = {
				NOR = {
					trait = envious
					trait = deceitful
					trait = ambitious
				}

				opinion = {
					who = ROOT
					value >= 25
				}
			}
		}

		mult_modifier = {
			factor = 0.5

			reverse_opinion = {
				who = FROM
				value >= 0
			}
		}

		mult_modifier = {
			factor = 1.5

			reverse_opinion = {
				who = FROM
				value < -25
			}
		}

		mult_modifier = {
			factor = 1.5

			reverse_opinion = {
				who = FROM
				value < -50
			}
		}

		mult_modifier = {
			factor = 1.5

			reverse_opinion = {
				who = FROM
				value < -75
			}
		}

		mult_modifier = {
			factor = 1.5
			FROM = { intrigue >= 10 }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { intrigue >= 15 }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { intrigue >= 20 }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = patient }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = slothful }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = wroth }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = proud }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = brave }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = deceitful }
		}

		mult_modifier = {
			factor = 2.0
			FROM = { trait = greedy }
		}

		mult_modifier = {
			factor = 2.0
			FROM = { trait = envious }
		}

		mult_modifier = {
			factor = 4.0
			FROM = { trait = ambitious }
		}
	}
}

# Seduce someone.
plot_seduce = {
	type = realm_characters
	intrigue_plot = yes

	# Plotter scope
	potential = {
		NOT = { has_dlc = "Way of Life" } # TOTO: Make available for unplayable characters, who can't use seduction focus?
		is_adult = yes
		is_pregnant = no
		prisoner = no
		is_incapable = no

		trigger_if = {
			limit = { has_lover = yes }

			OR = {
				trait = lustful
				trait = hedonist
				trait = lunatic
			}

			trigger_if = {
				limit = { num_of_lovers > 1 }

				OR = {
					AND = {
						num_of_lovers < 3
						intrigue >= 20
					}

					AND = {
						num_of_lovers < 4
						intrigue >= 25
					}

					AND = {
						num_of_lovers < 5
						intrigue >= 30
					}
				}
			}
		}

		NOR = {
			trait = imbecile
			trait = clubfooted
			trait = hunchback
			trait = harelip
			trait = ugly
			trait = lisp
			trait = inbred
			trait = dwarf
			trait = chaste
			trait = celibate
			trait = eunuch
			has_character_modifier = messalian_prayer
		}

		trigger_if = {
			limit = {
				OR = {
					trait = lunatic
					trait = possessed
				}
			}

			health_traits < 2
		}
		trigger_else = {
			health_traits < 1
		}

	#	trigger_if = {
	#		limit = { ai = yes }
	#		has_character_flag = allow_plotting
	#	}
	}

	# Target scope
	target_potential = {
		FROM = {
			attracted_to_prev_trigger = yes
			same_realm = ROOT
		}
	}

	# Target allow trigger for when players target a specific character in the GUI
	player_allow = {
		is_adult = yes
		is_pregnant = no

		NOR = {
			trait = celibate
			trait = chaste
			is_married = FROM

			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}

			reverse_has_opinion_modifier = {
				name = love_scorned
				who = FROM
			}
		}

		trigger_if = {
			limit = { is_close_relative = FROM }

			religion_has_incest = yes
			FROM = { religion_has_incest = yes }
		}

		trigger_if = {
			limit = { has_lover = yes }

			num_of_lovers < 3

			OR = {
				trait = lustful
				trait = hedonist
				trait = lunatic
			}
		}
	}

	# Target character scope
	allow = {
		OR = {
			# Liege or liege's spouse
			is_liege_of = FROM
			any_spouse = { is_liege_of = FROM }

			# Child of liege
			father = { is_liege_of = FROM }
			mother = { is_liege_of = FROM }
		}

		is_adult = yes
		is_pregnant = no

		NOR = {
			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}

			reverse_has_opinion_modifier = {
				name = love_scorned
				who = FROM
			}

			trait = celibate
			trait = chaste
			is_married = FROM
			is_lover = FROM
			is_consort = FROM
		}

		trigger_if = {
			limit = { is_close_relative = FROM }

			religion_has_incest = yes
			FROM = { religion_has_incest = yes }
		}

		trigger_if = {
			limit = { has_lover = yes }

			num_of_lovers < 5

			OR = {
				trait = lustful
				trait = hedonist
				trait = lunatic
			}
		}
	}

	success = {
		is_lover = FROM
		hidden_trigger = { is_plot_active = yes }
	}

	effect = {
		FROM = {
			prestige = 25

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}

			# Clear flags
			hidden_effect = {
				clr_character_flag = plot_seduce_decision_100_taken
				clr_character_flag = plot_seducer
				clr_character_flag = allow_plotting

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 5
				}

				change_variable = {
					which = lifestyle_intrigue
					value = 1
				}
			}
		}
	}

	abort = {
		OR = {
			is_alive = no

			trigger_if = {
				limit = { has_lover = yes }

				NOR = {
					trait = lustful
					trait = hedonist
					trait = lunatic
					FROM = { has_character_flag = plot_seducer }
				}
			}

			AND = {
				num_of_lovers >= 5

				OR = {
					trait = lustful
					trait = hedonist
					trait = lunatic
				}

				FROM = { NOT = { has_character_flag = plot_seducer } }
			}

			trait = celibate
			trait = chaste

			trigger_if = {
				limit = { is_pregnant = yes }
				FROM = { NOT = { has_character_flag = plot_seducer } }
			}

			FROM = {
				OR = {
					trait = celibate

					trigger_if = {
						limit = { has_lover = yes }

						NOR = {
							trait = lustful
							trait = hedonist
							trait = lunatic
							has_character_flag = plot_seducer
						}
					}

					trigger_if = {
						limit = {
							OR = {
								trait = lunatic
								trait = possessed
							}
						}

						health_traits >= 2
					}
					trigger_else = {
						health_traits >= 1
					}

					trigger_if = {
						limit = { is_pregnant = yes }
						NOT = { has_character_flag = plot_seducer }
					}
				}
			}
		}
	}

	abort_effect = {
		FROM = {
			# Clear flags
			hidden_effect = {
				clr_character_flag = plot_seduce_decision_100_taken
				clr_character_flag = allow_plotting

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}
		}
	}

	chance = {
		factor = 1

		trigger = {
			trigger_if = {
				limit = { FROM = { ai = yes } }

				has_game_rule = {
					name = ai_seduction
					value = on
				}

				FROM = {
					NOT = { trait = content }
				}

				opinion = {
					who = FROM
					value >= 0
				}
			}
		}

		mult_modifier = {
			factor = 0.3

			opinion = {
				who = FROM
				value >= 20
			}
		}

		mult_modifier = {
			factor = 0.4

			opinion = {
				who = FROM
				value >= 40
			}
		}

		mult_modifier = {
			factor = 0.5

			opinion = {
				who = FROM
				value >= 60
			}
		}

		mult_modifier = {
			factor = 0.6

			opinion = {
				who = FROM
				value >= 80
			}
		}

		mult_modifier = {
			factor = 0.5
			NOT = { is_liege_of = FROM }
		}

		mult_modifier = {
			factor = 1.1
			FROM = { trait = arbitrary }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = deceitful }
		}

		mult_modifier = {
			factor = 2.0
			FROM = { trait = ambitious }
		}

		mult_modifier = {
			factor = 4.0

			FROM = {
				OR = {
					trait = lustful
					trait = hedonist
				}
			}
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = genius }
		}

		mult_modifier = {
			factor = 1.25
			FROM = { trait = gregarious }
		}

		mult_modifier = {
			factor = 1.25
			FROM = { trait = attractive }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}

		mult_modifier = {
			factor = 0.5

			FROM = {
				OR = {
					trait = slow
					trait = dull
				}
			}
		}

		mult_modifier = {
			factor = 0.85
			FROM = { practical_age >= 25 }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { practical_age >= 30 }
		}

		mult_modifier = {
			factor = 0.05
			FROM = { practical_age >= 45 }
		}

		mult_modifier = {
			factor = 0.4
			FROM = { num_of_children >= 1 }
		}

		mult_modifier = {
			factor = 0.25
			FROM = { num_of_lovers >= 1 }
		}

		mult_modifier = {
			factor = 2.0

			FROM = {
				OR = {
					trait = lunatic
					trait = possessed
				}
			}
		}

		mult_modifier = {
			factor = 0.20

			FROM = {
				any_child = { trait = bastard }
			}
		}

		mult_modifier = {
			factor = 0.20
			is_ruler = no
			trait = bastard
		}

		mult_modifier = {
			factor = 0.5
			FROM = { is_married = yes }
		}

		mult_modifier = {
			factor = 1.10
			real_tier = DUKE
		}

		mult_modifier = {
			factor = 1.20
			higher_real_tier_than = DUKE
		}

		mult_modifier = {
			factor = 1.5
			trait = attractive
		}

		mult_modifier = {
			factor = 0.01
			FROM = { is_priest = yes }
		}

		mult_modifier = {
			factor = 0.35

			FROM = {
				any_spouse = { is_ruler = yes }
			}
		}
	}
}

# Murder someone out of revenge
plot_take_revenge = {
	type = realm_characters_plus # All characters in the same realm, plus rivals and relatives of self, parents, children and spouse
	intrigue_plot = yes
	murder_plot = yes

	# Plotter scope
	potential = {
		is_adult = yes
		prisoner = no
		is_incapable = no

	#	trigger_if = {
	#		limit = { ai = yes }
	#		has_character_flag = allow_plotting
	#	}
	}

	# Target scope
	target_potential = {
		OR = {
			FROM = { is_foe = ROOT }

			AND = {
				OR = {
					has_plot = plot_kill_character
					has_plot = plot_kill_spouse
					has_plot = plot_take_revenge
				}

				plot_is_known_by = FROM

				plot_target_char = {
					OR = {
						character = FROM
						is_child_of = FROM
						is_parent_of = FROM
						is_married = FROM
					}
				}
			}
		}
	}

	# Target allow trigger for when players target a specific character in the GUI
	player_allow = {
		NOT = {
			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}
		}

		is_within_diplo_range = FROM
	}

	# Target character scope
	allow = {
		NOT = {
			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}
		}

		is_within_diplo_range = FROM
	}

	success = {
		is_alive = no

		hidden_trigger = {
			killer = {
				character = FROM
				is_plot_active = yes
			}
		}
	}

	effect = {
		FROM = {
			show_scope_change = no

			any_plot_backer = {
				show_scope_change = no

				reverse_opinion = {
					name = opinion_grateful
					who = FROM
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}

			# Clear flags
			hidden_effect = {
				clr_character_flag = event7040
				clr_character_flag = event1007003
				clr_character_flag = allow_plotting

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 5
				}

				change_variable = {
					which = lifestyle_intrigue
					value = 1
				}
			}
		}
	}

	abort = {
		FROM = {
			OR = {
				prisoner = yes
				is_incapable = yes
			}
		}
	}

	abort_effect = {
		FROM = {
			# Clear flags
			hidden_effect = {
				clr_character_flag = event7040
				clr_character_flag = event1007003
				clr_character_flag = allow_plotting

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}
		}
	}

	chance = {
		factor = 20

		trigger = {
			trigger_if = {
				limit = { FROM = { ai = yes } }

				FROM = {
					pacifist = no

					trigger_if = {
						limit = {
							OR = {
								trait = kind
								trait = just
							}
						}

						OR = {
							trait = lunatic
							trait = possessed
						}
					}

					NOR = {
						trait = dishonorable6
						trait = dishonorable7
						trait = dishonorable8
						trait = dishonorable9
						trait = dishonorable10
					}

					opinion = {
						who = ROOT
						value < 0
					}
				}
			}
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = dishonorable1 }
		}

		mult_modifier = {
			factor = 0.4
			FROM = { trait = dishonorable2 }
		}

		mult_modifier = {
			factor = 0.3
			FROM = { trait = dishonorable3 }
		}

		mult_modifier = {
			factor = 0.2
			FROM = { trait = dishonorable4 }
		}

		mult_modifier = {
			factor = 0.1
			FROM = { trait = dishonorable5 }
		}

		mult_modifier = {
			factor = 0.1

			FROM = {
				trait = content

				NOR = {
					trait = lunatic
					trait = possessed
				}
			}
		}

		mult_modifier = {
			factor = 0.1

			FROM = {
				trait = honest

				NOR = {
					trait = lunatic
					trait = possessed
				}
			}
		}

		mult_modifier = {
			factor = 0.1
			FROM = { trait = slothful }
		}

		mult_modifier = {
			factor = 0.1
			FROM = { trait = craven }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = deceitful }
		}

		mult_modifier = {
			factor = 2.0
			FROM = { trait = impaler }
		}

		mult_modifier = {
			factor = 2.0
			FROM = { trait = brave }
		}

		mult_modifier = {
			factor = 3.0
			FROM = { trait = wroth }
		}

		mult_modifier = {
			factor = 3.0
			FROM = { trait = lunatic }
		}

		mult_modifier = {
			factor = 10.0
			FROM = { trait = possessed }
		}

		mult_modifier = {
			factor = 1.5

			their_opinion = {
				who = FROM
				value < -25
			}
		}

		mult_modifier = {
			factor = 2.0

			their_opinion = {
				who = FROM
				value < -50
			}
		}

		mult_modifier = {
			factor = 2.0

			their_opinion = {
				who = FROM
				value < -75
			}
		}

		mult_modifier = {
			factor = 0.25
			FROM = { intrigue < 8 }
		}

		mult_modifier = {
			factor = 2
			FROM = { intrigue >= 15 }
		}

		mult_modifier = {
			factor = 2
			FROM = { intrigue >= 20 }
		}
	}
}

# Plot to take control of your wife's realm through Jure Uxoris
plot_usurp_wife = {
	type = spouse
	vassal_intrigue_plot = yes
	intrigue_plot = yes

	# Plotter scope
	potential = {
		is_female = no
		prestige > 0
		is_lowborn = no
		prisoner = no

		trigger_if = {
			limit = { is_ruler = yes }

			is_feudal = yes
			over_max_demesne_size <= 0
		}

		OR = {
			diplomacy >= 8
			stewardship >= 8
			martial >= 8
			intrigue >= 8
		}

		health_traits < 1
		is_dumb_trigger = no

		NOR = {
			trait = excommunicated
			trait = incapable
			trait = bastard
			trait = content
			trait = eunuch
			trait = monk
			has_character_modifier = failed_to_usurp_wife
		}

	#	trigger_if = {
	#		limit = { ai = yes }
	#		has_character_flag = allow_plotting
	#	}
	}

	# Target scope
	target_potential = {
		is_female = yes
		is_ruler = yes
	}

	# Target scope
	allow = {
		is_feudal = yes
		is_pregnant = no

		OR = {
			FROM = { is_ruler = no }
			is_liege_or_above_of = FROM
			same_realm = FROM

			AND = {
				independent = yes
				FROM = { independent = yes }
			}
		}

		OR = {
			has_law = succ_gavelkind
			has_law = succ_seniority
			has_law = succ_primogeniture
			has_law = succ_ultimogeniture
		}

		NOR = {
			has_law = enatic_cognatic_succession
			has_law = enatic_succession
		}

		OR = {
			AND = {
				culture_group = FROM
				religion_group = FROM
			}

			capital_scope = {
				culture_group = FROM
				religion_group = FROM
			}

			dynasty = FROM

			FROM = {
				is_ruler = yes

				OR = {
					trait = ambitious
					trait = gregarious
					trait = lunatic
					trait = possessed
				}
			}
		}

		# TODO: Add custom_tooltip
		NOR = {
			AND = {
				trait = proud
				FROM = { trait = humble }
			}
			AND = {
				trait = brave
				FROM = { trait = craven }
			}
			AND = {
				trait = diligent
				FROM = { trait = slothful }
			}
			AND = {
				trait = gregarious
				FROM = { trait = shy }
			}
		}

		# TODO: Add custom_tooltip
		trigger_if = {
			limit = {
				OR = {
					trait = elusive_shadow
					trait = genius
					trait = ambitious
				}
			}

			FROM = {
				OR = {
					trait = ambitious
					trait = genius
					trait = elusive_shadow
				}
			}
		}

		OR = {
			trait = excommunicated
			trait = infirm
			trait = incapable
			trait = depressed
			trait = blinded
			trait = content
			trait = drunkard
			trait = lunatic
			trait = possessed
			trait = leper
			trait = inbred
			is_dumb_trigger = yes

			calc_true_if = {
				amount >= 2

				trait = trusting
				trait = shy
				trait = craven
				trait = humble
			}
		}

		OR = {
			NOT = { has_law = true_cognatic_succession }

			AND = {
				is_married_matrilineally = no

				OR = {
					trait = incapable
					trait = lunatic
					trait = possessed
					trait = imbecile
				}
			}
		}
	}

	success = {
		hidden_trigger = {
			FROM = { has_character_flag = usurped_my_wife@ROOT }
		}
	}

	effect = {
		opinion = {
			name = opinion_recent_plot
			who = FROM
			years = 5
		}

		FROM = {
			show_scope_change = no

			change_intrigue = 1

			any_plot_backer = {
				show_scope_change = no

				reverse_opinion = {
					name = opinion_grateful
					who = FROM
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}

			hidden_effect = {
				clr_character_flag = allow_plotting

				change_variable = {
					which = lifestyle_intrigue
					value = 1
				}
			}
		}
	}

	abort = {
		OR = {
			NOR = {
				FROM = { is_ruler = no }
				is_liege_or_above_of = FROM
				same_realm = FROM

				AND = {
					independent = yes
					FROM = { independent = yes }
				}
			}

			NOT = { is_married = FROM }
			has_law = enatic_cognatic_succession
			has_law = enatic_succession

			NOR = {
				has_law = succ_gavelkind
				has_law = succ_seniority
				has_law = succ_primogeniture
				has_law = succ_ultimogeniture
			}

			FROM = {
				OR = {
					is_incapable = yes
					prisoner = yes
					trait = content
					independent = no
				}
			}
		}
	}

	abort_effect = {
		opinion = {
			name = opinion_recent_plot
			who = FROM
			years = 5
		}

		FROM = {
			show_scope_change = no

			if = {
				limit = { is_married = yes }

				add_character_modifier = {
					name = failed_to_usurp_wife
					years = 5
					hidden = yes
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}

			clr_character_flag = allow_plotting
			clr_character_flag = plot_usurp_wife_decision_taken
		}
	}

	chance = {
		factor = 10

		trigger = {
			trigger_if = {
				limit = { FROM = { ai = yes } }

				FROM = {
					NOR = {
						trait = kind
						trait = honest
						trait = humble
					}

					opinion = {
						who = ROOT
						value < 0
					}
				}
			}
		}

		mult_modifier = {
			factor = 10

			reverse_opinion = {
				who = FROM
				value < -50
			}
		}

		mult_modifier = {
			factor = 0.1

			FROM = {
				OR = {
					trait = slothful
					trait = craven
				}
			}
		}

		mult_modifier = {
			factor = 2
			FROM = { trait = envious }
		}

		mult_modifier = {
			factor = 2
			FROM = { trait = greedy }
		}

		mult_modifier = {
			factor = 2

			FROM = {
				OR = {
					trait = ambitious
					trait = deceitful
					trait = proud
					trait = cruel
				}
			}
		}
	}
}

# Replace your liege's current regent
plot_replace_regent = {
	type = realm_characters
	vassal_intrigue_plot = yes

	# Plotter scope
	potential = {
		liege = { has_regent = yes }
		is_adult = yes
		prisoner = no
		independent = no
		is_incapable = no

		NOR = {
			has_minor_title = title_regent
			has_character_modifier = replace_regent_timer
		}

	#	trigger_if = {
	#		limit = { ai = yes }
	#		has_character_flag = allow_plotting
	#	}
	}

	# Target scope
	target_potential = {
		has_minor_title = title_regent
		same_liege = FROM
	}

	# Target allow trigger for when players target a specific character in the GUI
	player_allow = {
		FROM = {
			trigger_if = {
				limit = { is_ruler = yes }
				is_voter = yes
			}

			OR = {
				is_married = ROOT
				is_close_relative = ROOT
				is_primary_heir = ROOT
				is_voter = yes
			}

			trigger_if = {
				limit = { is_female = yes }

				ROOT = {
					OR = {
						has_law = true_cognatic_succession
						has_law = enatic_cognatic_succession
						has_law = enatic_succession
					}
				}
			}
			trigger_else = {
				ROOT = {
					OR = {
						has_law = agnatic_succession
						has_law = cognatic_succession
						has_law = true_cognatic_succession
					}
				}
			}
		}

		liege = {
			num_of_vassals >= 3
		}
	}

	# Target character scope
	allow = {
		FROM = {
			trigger_if = {
				limit = { is_ruler = yes }
				is_voter = yes
			}

			OR = {
				is_married = ROOT
				is_close_relative = ROOT
				is_primary_heir = ROOT
				is_voter = yes
			}

			trigger_if = {
				limit = { is_female = yes }

				ROOT = {
					OR = {
						has_law = true_cognatic_succession
						has_law = enatic_cognatic_succession
						has_law = enatic_succession
					}
				}
			}
			trigger_else = {
				ROOT = {
					OR = {
						has_law = agnatic_succession
						has_law = cognatic_succession
						has_law = true_cognatic_succession
					}
				}
			}
		}

		liege = {
			num_of_vassals >= 3
		}
	}

	success = {
		same_liege = FROM
		FROM = { has_minor_title = title_regent }
	}

	effect = {
		FROM = {
			show_scope_change = no

			change_intrigue = 1

			any_plot_backer = {
				show_scope_change = no

				reverse_opinion = {
					name = opinion_grateful
					who = FROM
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}

			hidden_effect = {
				clr_character_flag = allow_plotting
				clr_character_flag = speed_up_replace_regent
				clr_character_flag = replace_regent_plot_discovery

				change_variable = {
					which = lifestyle_intrigue
					value = 1
				}
			}
		}
	}

	abort = {
		OR = {
			NOT = { same_liege = FROM }

			FROM = {
				OR = {
					prisoner = yes
					is_incapable = yes

					AND = {
						is_councillor = no
						liege = { any_courtier = { character = PREVPREV } }
					}
				}
			}

			liege = {
				OR = {
					has_regent = no

					regent = {
						NOR = {
							character = FROM
							character = ROOT
						}
					}
				}
			}
		}
	}

	abort_effect = {
		FROM = {
			show_scope_change = no

			# Clear flags
			hidden_effect = {
				clr_character_flag = allow_plotting
				clr_character_flag = speed_up_replace_regent
				clr_character_flag = replace_regent_plot_discovery

				add_character_modifier = {
					name = replace_regent_timer
					years = 10
					hidden = yes
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}
		}
	}

	chance = {
		factor = 5

		trigger = {
			trigger_if = {
				limit = { FROM = { ai = yes } }

				FROM = {
					is_ill = no
					is_dumb_trigger = no

					NOR = {
						trait = humble
						trait = content
						trait = trusting
					}

					opinion = {
						who = ROOT
						value < 50
					}
				}
			}
		}

		mult_modifier = {
			factor = 0.75

			reverse_opinion = {
				who = FROM
				value >= 0
			}
		}

		mult_modifier = {
			factor = 0.75

			reverse_opinion = {
				who = FROM
				value >= 20
			}
		}

		mult_modifier = {
			factor = 0.5

			reverse_opinion = {
				who = FROM
				value >= 30
			}
		}

		mult_modifier = {
			factor = 0.5

			reverse_opinion = {
				who = FROM
				value >= 40
			}
		}

		mult_modifier = {
			factor = 1.5

			reverse_opinion = {
				who = FROM
				value < -20
			}
		}

		mult_modifier = {
			factor = 1.5

			reverse_opinion = {
				who = FROM
				value < -40
			}
		}

		mult_modifier = {
			factor = 1.5

			reverse_opinion = {
				who = FROM
				value < -60
			}
		}

		mult_modifier = {
			factor = 1.5

			reverse_opinion = {
				who = FROM
				value < -80
			}
		}

		mult_modifier = {
			factor = 0.75

			attribute_diff = {
				character = FROM
				attribute = intrigue
				value >= 2
			}
		}

		mult_modifier = {
			factor = 0.75

			attribute_diff = {
				character = FROM
				attribute = intrigue
				value >= 4
			}
		}

		mult_modifier = {
			factor = 0.5

			attribute_diff = {
				character = FROM
				attribute = intrigue
				value >= 6
			}
		}

		mult_modifier = {
			factor = 1.25

			attribute_diff = {
				character = FROM
				attribute = intrigue
				value <= -2
			}
		}

		mult_modifier = {
			factor = 1.25

			attribute_diff = {
				character = FROM
				attribute = intrigue
				value <= -4
			}
		}

		mult_modifier = {
			factor = 1.5

			attribute_diff = {
				character = FROM
				attribute = intrigue
				value <= -6
			}
		}

		mult_modifier = {
			factor = 5.0

			FROM = {
				OR = {
					trait = lunatic
					trait = possessed
				}
			}
		}

		mult_modifier = {
			factor = 2.0
			FROM = { trait = ambitious }
		}

		mult_modifier = {
			factor = 2.0
			FROM = { trait = paranoid }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = greedy }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = envious }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = deceitful }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = proud }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = slothful }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = kind }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = shy }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = craven }
		}
	}
}

# Usurp an incapable liege's titles
plot_incapable_usurp = {
	type = realm_characters
	vassal_intrigue_plot = yes

	# Plotter scope
	potential = {
		OR = {
			is_tribal = yes
			is_feudal = yes
		}

		is_adult = yes
		prisoner = no
		independent = no
		is_incapable = no
		is_dumb_trigger = no
		NOT = { trait = inbred }

	#	trigger_if = {
	#		limit = { ai = yes }
	#		has_character_flag = allow_plotting
	#	}
	}

	# Target scope
	target_potential = {
		is_liege_of = FROM
		trait = incapable # TODO: Decide if all other forms of 'incapable' also suffice here
	}

	# Target allow trigger for when players target a specific character in the GUI
	player_allow = {
		regent = { character = FROM }
		num_of_vassals >= 3
		is_adult = yes

		OR = {
			is_tribal = yes
			is_feudal = yes
		}

		NOR = {
			has_law = succ_elective_gavelkind
			has_law = succ_feudal_elective
			has_law = succ_hre_elective
			has_law = succ_byzantine_elective
			has_law = succ_tanistry
			has_law = succ_eldership

			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}
		}
	}

	# Target character scope
	allow = {
		regent = { character = FROM }
		num_of_vassals >= 3
		is_adult = yes

		OR = {
			is_tribal = yes
			is_feudal = yes
		}

		NOR = {
			has_law = succ_elective_gavelkind
			has_law = succ_feudal_elective
			has_law = succ_hre_elective
			has_law = succ_byzantine_elective
			has_law = succ_tanistry
			has_law = succ_eldership

			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}
		}
	}

	chance = {
		factor = 1

		trigger = {
			trigger_if = {
				limit = { FROM = { ai = yes } }

				FROM = {
					intrigue >= 8

					NOR = {
						trait = content
						trait = humble
						trait = stressed
						trait = depressed
					}

					trigger_if = {
						limit = {
							OR = {
								is_married = ROOT
								is_parent_of = ROOT
								sibling = ROOT
							}

							ROOT = {
								current_heir = {
									is_incapable = no

									NOR = {
										character = ROOT_FROM
										trait = lunatic
										trait = possessed
									}

									reverse_opinion = {
										who = ROOT
										value >= -50
									}

									OR = {
										dynasty = ROOT
										dynasty = ROOT_FROM
									}
								}
							}
						}

						trait = ambitious

						OR = {
							trait = greedy
							trait = envious
							trait = deceitful
							trait = proud
						}
					}
					trigger_else_if = {
						limit = {
							NOR = {
								is_married = ROOT
								is_parent_of = ROOT
								sibling = ROOT
								is_primary_heir = yes
							}
						}

						OR = {
							AND = {
								trait = ambitious

								OR = {
									trait = greedy
									trait = envious
									trait = deceitful
									trait = proud
								}
							}

							opinion = {
								who = ROOT
								value < 0
							}
						}
					}
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			reverse_opinion = {
				who = FROM
				value < -25
			}
		}

		mult_modifier = {
			factor = 1.5

			reverse_opinion = {
				who = FROM
				value < -50
			}
		}

		mult_modifier = {
			factor = 1.5

			reverse_opinion = {
				who = FROM
				value < -75
			}
		}

		mult_modifier = {
			factor = 0.5
			NOT = { dynasty = FROM }
		}

		mult_modifier = {
			factor = 5

			FROM = {
				OR = {
					is_married = ROOT
					is_mother = ROOT
					is_father = ROOT
					sibling = ROOT
					is_primary_heir = yes
				}

				OR = {
					trait = proud
					trait = ambitious
					trait = paranoid
				}
			}
		}

		mult_modifier = {
			factor = 5

			FROM = {
				OR = {
					is_married = ROOT
					is_mother = ROOT
					is_father = ROOT
				}
			}

			current_heir = {
				NOT = { dynasty = ROOT }
			}
		}

		mult_modifier = {
			factor = 1.2
			FROM = { intrigue >= 12 }
		}

		mult_modifier = {
			factor = 1.2
			FROM = { intrigue >= 14 }
		}

		mult_modifier = {
			factor = 1.2
			FROM = { intrigue >= 16 }
		}

		mult_modifier = {
			factor = 1.2
			FROM = { intrigue >= 18 }
		}

		mult_modifier = {
			factor = 1.2
			FROM = { intrigue >= 20 }
		}

		mult_modifier = {
			factor = 2.0

			FROM = {
				OR = {
					trait = lunatic
					trait = possessed
				}
			}
		}

		mult_modifier = {
			factor = 5
			prisoner = yes
		}

		mult_modifier = {
			factor = 5

			prisoner = yes
			host = { character = FROM }
		}
	}

	success = {
		FROM = { has_character_flag = regent_usurp_titles } # TODO: Add custom_tooltip
	}

	effect = {
		FROM = {
			show_scope_change = no

			change_intrigue = 1

			any_plot_backer = {
				show_scope_change = no

				reverse_opinion = {
					name = opinion_very_grateful
					who = PREV
					years = 10
				}

				opinion = {
					name = opinion_fought_for_claimant
					who = PREV
					years = 10
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}

			hidden_effect = {
				clr_character_flag = allow_plotting
				clr_character_flag = regent_usurp_titles

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 1
				}

				change_variable = {
					which = lifestyle_intrigue
					value = 1
				}
			}
		}
	}

	abort = {
		OR = {
			FROM = { prisoner = yes }
			has_regent = no
			NOT = { regent = { character = FROM } }
		}
	}

	abort_effect = {
		FROM = {
			show_scope_change = no

			# Clear flags
			hidden_effect = {
				clr_character_flag = allow_plotting

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 1
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}
		}
	}
}

# Stir nationalist rebellion in one's own provinces
plot_stir_rebellion = {
	type = realm_characters
	vassal_intrigue_plot = yes

	# Plotter scope
	potential = {
		is_playable = yes
		higher_real_tier_than = BARON
		is_adult = yes
		independent = no
		prisoner = no
		is_incapable = no

		capital_scope = {
			culture = PREV
			religion = PREV

			kingdom = {
				culture = PREVPREV

				trigger_if = {
					limit = { has_holder = yes }

					holder_scope = {
						OR = {
							NOT = { culture = PREVPREVPREV }

							top_liege = {
								NOT = {
									any_realm_province = {
										province_id = PREVPREVPREVPREV
										held_under_PREV = yes
									}
								}
							}
						}
					}
				}
			}
		}

	#	trigger_if = {
	#		limit = { ai = yes }
	#		has_character_flag = allow_plotting
	#	}
	}

	# Target scope
	target_potential = {
		independent = yes
		in_revolt = no

		NOR = {
			has_truce = FROM
			has_non_aggression_pact_with = FROM
			culture = FROM
		}
	}

	# Target scope
	allow = {
		NOT = {
			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}
		}

		FROM = {
			top_liege = {
				character = ROOT
				NOT = { has_character_flag = has_current_revolt }
			}

			capital_scope = {
				culture = PREV
				religion = PREV

				kingdom = {
					culture = PREVPREV

					trigger_if = {
						limit = { has_holder = yes }

						holder_scope = {
							OR = {
								NOT = { culture = PREVPREVPREV }

								top_liege = {
									NOT = {
										any_realm_province = {
											province_id = PREVPREVPREVPREV
											held_under_PREV = yes
										}
									}
								}
							}
						}
					}
				}

				NOT = { has_province_modifier = cultural_unrest }
			}
		}
	}

	creation_effect = {
		FROM = {
			set_character_flag = wants_to_lead_revolt
		}
	}

	success = {
		location = {
			has_province_modifier = cultural_unrest
		}
	}

	effect = {
		FROM = {
			show_scope_change = no

			change_intrigue = 1

			any_plot_backer = {
				show_scope_change = no

				reverse_opinion = {
					name = opinion_grateful
					who = FROM
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}

			hidden_effect = {
				clr_character_flag = allow_plotting
				clr_character_flag = incite_revolt_underway

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 1
				}

				change_variable = {
					which = lifestyle_intrigue
					value = 1
				}
			}
		}
	}

	abort = {
		FROM = {
			OR = {
				prisoner = yes
				independent = yes
				is_incapable = yes

				capital_scope = {
					NOR = {
						culture = PREV
						religion = PREV

						kingdom = {
							culture = PREVPREV

							trigger_if = {
								limit = { has_holder = yes }

								holder_scope = {
									OR = {
										NOT = { culture = PREVPREVPREV }

										top_liege = {
											NOT = {
												any_realm_province = {
													province_id = PREVPREVPREVPREV
													held_under_PREV = yes
												}
											}
										}
									}
								}
							}
						}
					}
				}

				top_liege = {
					OR = {
						NOT = { character = ROOT }
						culture = PREV
						has_truce = PREV
						has_non_aggression_pact_with = PREV
						any_demesne_title = { temporary = yes }
					}
				}
			}
		}
	}

	abort_effect = {
		FROM = {
			show_scope_change = no

			# Clear flags
			hidden_effect = {
				clr_character_flag = allow_plotting
				clr_character_flag = wants_to_lead_revolt
				clr_character_flag = incite_revolt_underway

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 1
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}
		}
	}

	chance = {
		factor = 1

		trigger = {
			trigger_if = {
				limit = { FROM = { ai = yes } }

				FROM = {
					intrigue >= 8

					trigger_if = {
						limit = { vassal_of = ROOT }
						in_faction = faction_separatist
					}

					is_dumb_trigger = no

					NOR = {
						trait = paranoid
						trait = patient
						trait = content
						trait = humble
						trait = craven
						trait = inbred
					}

					opinion = {
						who = ROOT
						value < 0
					}

					NOR = {
						dynasty = ROOT
						is_close_relative = ROOT
						is_allied_with = ROOT
						has_non_aggression_pact_with = ROOT
					}
				}
			}
		}

		mult_modifier = {
			factor = 0.5

			realm_size >= 10

			NOT = {
				any_realm_lord = {
					NOT = { character = FROM }
					higher_real_tier_than = BARON
					culture = FROM
					religion = FROM
					is_adult = yes
					prisoner = no
					is_incapable = no
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			any_realm_lord = {
				NOT = { character = FROM }
				higher_real_tier_than = BARON
				culture = FROM
				religion = FROM
				is_adult = yes
				prisoner = no
				is_incapable = no
				count = 5
			}
		}

		mult_modifier = {
			factor = 2
			NOT = { culture_group = FROM }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = just }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = greedy }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = kind }
		}

		mult_modifier = {
			factor = 2
			FROM = { trait = ambitious }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = deceitful }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = wroth }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = brave }
		}

		mult_modifier = {
			factor = 5

			FROM = {
				OR = {
					trait = lunatic
					trait = possessed
				}
			}
		}
	}
}

# Mayor attempts to usurp county title and become merchant republic
plot_become_republic = {
	type = realm_characters
	vassal_intrigue_plot = yes

	# Plotter scope
	potential = {
		is_ruler = yes
		is_republic = yes
		real_tier = BARON
		is_adult = yes
		trait = ambitious

		primary_title = {
			location = {
				is_coastal = yes
				TECH_TRADE_PRACTICES >= 1
			}
		}

		OR = {
			primary_title = {
				OR = {
					title = b_amalfi
					title = b_venezia
					title = b_genoa
					title = b_pisa
					title = b_ancona
					title = b_gaeta
					title = b_novgorod
					title = b_noli
					title = b_lubeck
				}
			}

			dejure_liege_title = {
				OR = {
					title = c_hamburg
					title = c_gotland
				}
			}

			primary_title = {
				location = {
					NOR = {
						duchy = { capital_scope = { province_id = PREVPREV } }
						kingdom = { capital_scope = { province_id = PREVPREV } }
					}
				}

				OR = {
					has_building = ct_port_3
					has_building = ct_port_4
					has_building = ct_port_5
				}
			}
		}

	#	trigger_if = {
	#		limit = { ai = yes }
	#		has_character_flag = allow_plotting
	#	}

		is_incapable = no
		is_dumb_trigger = no
		prisoner = no
		is_patrician = no
		independent = no

		NOR = {
			trait = humble
			trait = craven
		}

		liege = {
			NOT = { is_parent_of = PREV }
		}
	}

	# Target scope
	target_potential = {
		is_liege_of = FROM
		is_feudal = yes
		ai = yes
	}

	# Target scope
	allow = {
		FROM = {
			primary_title = {
				dejure_liege_title = {
					holder = ROOT
					is_tribal = no
					current_heir = { NOT = { character = PREVPREVPREV } }
				}
			}
		}

		NOR = {
			reverse_has_truce = FROM
			is_allied_with = FROM
			has_non_aggression_pact_with = FROM

			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}
		}
	}

	success = {
		FROM = { real_tier = COUNT }
	}

	effect = {
		FROM = {
			show_scope_change = no

			change_intrigue = 1

			any_plot_backer = {
				show_scope_change = no

				reverse_opinion = {
					name = opinion_grateful
					who = FROM
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}

			# Clear flags
			hidden_effect = {
				clr_character_flag = allow_plotting

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 5
				}

				change_variable = {
					which = lifestyle_intrigue
					value = 1
				}
			}
		}
	}

	abort = {
		OR = {
			FROM = {
				OR = {
					is_republic = no
					prisoner = yes
					independent = yes
					is_incapable = yes
					NOT = { trait = ambitious }
				}
			}

			ai = no
			NOT = { is_liege_of = FROM }
			is_feudal = no
			reverse_has_truce = FROM
			is_allied_with = FROM
			has_non_aggression_pact_with = FROM
		}
	}

	abort_effect = {
		FROM = {
			show_scope_change = no

			# Clear flags
			hidden_effect = {
				clr_character_flag = allow_plotting

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}
		}
	}

	chance = {
		factor = 1

		trigger = {
			trigger_if = {
				limit = { FROM = { ai = yes } }

				FROM = {
					wealth >= 100
					relative_power_to_liege >= 0.25

					opinion = {
						who = liege
						value < 25
					}
				}
			}
		}

		mult_modifier = {
			factor = 0.5

			reverse_opinion = {
				who = FROM
				value >= 0
			}
		}

		mult_modifier = {
			factor = 5.0

			OR = {
				regent = { character = FROM }
				job_spymaster = { character = FROM }
			}
		}

		mult_modifier = {
			factor = 2.0
			FROM = { is_lowborn = no }
		}

		mult_modifier = {
			factor = 2.0
			FROM = { trait = greedy }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = envious }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = proud }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = deceitful }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = brave }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = patient }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = charitable }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = slothful }
		}

		mult_modifier = {
			factor = 0.25
			FROM = { intrigue < 8 }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { intrigue >= 15 }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { intrigue >= 20 }
		}
	}
}

# Character plots to elope with lover
plot_elope = {
	type = character
	intrigue_plot = yes
	murder_plot = yes

	# Plotter scope
	potential = {
		is_female = no # For now, only do-able by males
		is_adult = yes
		mercenary = no
		holy_order = no
		prisoner = no
		is_married = no
		is_incapable = no

	#	trigger_if = {
	#		limit = { ai = yes }
	#		has_character_flag = allow_plotting
	#	}
	}

	# Target scope
	target_potential = {
		is_lover = FROM
		is_female = yes
		is_ruler = no
		NOT = { vassal_of = FROM }
	}

	# Target allow trigger for when players target a specific character in the GUI
	player_allow = {
		prisoner = no
		is_married = no
		is_within_diplo_range = FROM

		custom_tooltip = {
			text = CUSTOMTOOLTIP_KNOWN_ELOPER
			NOT = { has_character_flag = known_eloper }
		}

		NOT = {
			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}
		}
	}

	# Target scope
	allow = {
		prisoner = no
		is_married = no
		is_within_diplo_range = FROM

		custom_tooltip = {
			text = CUSTOMTOOLTIP_KNOWN_ELOPER
			NOT = { has_character_flag = known_eloper }
		}

		NOT = {
			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}
		}
	}

	success = {
		is_married = FROM

		hidden_trigger = {
			FROM = { is_plot_active = yes }
		}
	}

	effect = {
		FROM = {
			show_scope_change = no

			any_plot_backer = {
				show_scope_change = no

				reverse_opinion = {
					name = opinion_grateful
					who = FROM
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}

			# Clear flags
			hidden_effect = {
				clr_character_flag = allow_plotting

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 5
				}

				change_variable = {
					which = lifestyle_intrigue
					value = 1
				}
			}
		}
	}

	abort = {
		OR = {
			FROM = {
				OR = {
					prisoner = yes
					is_incapable = yes
					is_married = yes
				}
			}

			ROOT = {
				OR = {
					is_ruler = yes
					is_married = yes
					prisoner = yes
					is_incapable = yes
				}
			}
		}
	}

	abort_effect = {
		FROM = {
			show_scope_change = no

			# Clear flags
			hidden_effect = {
				clr_character_flag = allow_plotting
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}
		}
	}

	chance = {
		factor = 1

		trigger = {
			trigger_if = {
				limit = { FROM = { ai = yes } }

				FROM = {
					intrigue > 6

					NOR = {
						trait = kind
						trait = craven
						trait = content
						trait = humble
						has_opinion_modifier = { who = ROOT name = opinion_traitor }
						has_opinion_modifier = { who = ROOT name = attempted_murder_of_vassal }
						has_opinion_modifier = { who = ROOT name = attempted_murder }
						has_opinion_modifier = { who = ROOT name = attempted_murder_of_child }
						has_opinion_modifier = { who = ROOT name = opinion_spouse_slayer }
						has_opinion_modifier = { who = ROOT name = opinion_murder_attempt }
						has_opinion_modifier = { who = ROOT name = opinion_killed_close_kin }
						has_opinion_modifier = { who = ROOT name = attempted_murder_of_close_kin }
						has_opinion_modifier = { who = ROOT name = attempted_kidnapping }
					}
				}
			}
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = brave }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = deceitful }
		}

		mult_modifier = {
			factor = 2
			FROM = { has_character_flag = disobedient_daughter_unhappy }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = honest }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = humble }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = patient }
		}

		mult_modifier = {
			factor = 0.75
			FROM = { intrigue < 7 }
		}

		mult_modifier = {
			factor = 0.75
			FROM = { intrigue < 9 }
		}

		mult_modifier = {
			factor = 1.25
			FROM = { intrigue >= 12 }
		}

		mult_modifier = {
			factor = 1.25
			FROM = { intrigue >= 15 }
		}

		mult_modifier = {
			factor = 1.25
			FROM = { intrigue >= 18 }
		}
	}
}

# Councillor attempts to overthrow Imperial Government
plot_overthrow_empire = {
	type = realm_characters # All characters in the same realm, plus rivals and relatives of self, parents, children and spouse
	intrigue_plot = yes
	murder_plot = yes

	# Plotter scope
	potential = {
		is_voter = yes
		liege = { real_tier = EMPEROR }
		is_adult = yes
		prisoner = no
		independent = no
		is_incapable = no

	#	trigger_if = {
	#		limit = { ai = yes }
	#		has_character_flag = allow_plotting
	#	}
	}

	# Target scope
	target_potential = {
		real_tier = EMPEROR
		is_liege_of = FROM
		has_imperial_government_trigger = yes
	}

	# Target scope
	allow = {
		FROM = {
			show_scope_change = no
			has_claim = liege
		}

		prisoner = no

		NOR = {
			has_opinion_modifier = {
				name = opinion_recent_plot
				who = FROM
			}

			reverse_has_truce = FROM
			has_non_aggression_pact_with = FROM
		}
	}

	success = {
		FROM = {
			show_scope_change = no

			has_landed_title = liege
			hidden_trigger = { is_plot_active = yes }
		}
	}

	effect = {
		FROM = {
			show_scope_change = no

			change_intrigue = 1

			any_plot_backer = {
				show_scope_change = no

				opinion = {
					name = opinion_very_grateful
					who = FROM
					years = 5
				}

				reverse_opinion = {
					name = opinion_very_grateful
					who = FROM
					years = 5
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}

			hidden_effect = {
				clr_character_flag = allow_plotting

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 1
				}

				change_variable = {
					which = lifestyle_intrigue
					value = 1
				}
			}
		}
	}

	abort = {
		OR = {
			FROM = {
				OR = {
					prisoner = yes
					is_incapable = yes
					is_voter = no
				}
			}

			prisoner = yes
			NOT = { is_liege_of = FROM }
			lower_real_tier_than = EMPEROR
			reverse_has_truce = FROM
			has_non_aggression_pact_with = FROM
			has_imperial_government_trigger = no
		}
	}

	abort_effect = {
		FROM = {
			show_scope_change = no

			# Clear flags
			hidden_effect = {
				clr_character_flag = allow_plotting

				reverse_opinion = {
					name = opinion_recent_plot
					who = ROOT
					years = 1
				}
			}

			if = {
				limit = { has_character_modifier = plot_assisted_spying }
				remove_character_modifier = plot_assisted_spying
			}
		}
	}

	chance = {
		factor = 2

		trigger = {
			trigger_if = {
				limit = { FROM = { ai = yes } }

				FROM = {
					OR = {
						has_strong_claim = ROOT
						among_most_powerful_vassals = 5
					}

					NOR = {
						trait = content
						trait = humble
						trait = craven
						trait = imbecile
					}

					opinion = {
						who = ROOT
						value < 25
					}
				}

				current_heir = {
					NOT = { character = FROM }
				}
			}
		}

		mult_modifier = {
			factor = 0.1
			FROM = { is_dumb_trigger = yes }
		}

		mult_modifier = {
			factor = 0.1
			FROM = { trait = just }
		}

		mult_modifier = {
			factor = 0.25
			FROM = { trait = honest }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = diligent }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = patient }
		}

		mult_modifier = {
			factor = 0.5
			FROM = { trait = trusting }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = dishonorable1 }
		}

		mult_modifier = {
			factor = 2
			FROM = { trait = dishonorable2 }
		}

		mult_modifier = {
			factor = 2.5
			FROM = { trait = dishonorable3 }
		}

		mult_modifier = {
			factor = 3
			FROM = { trait = dishonorable4 }
		}

		mult_modifier = {
			factor = 3.5
			FROM = { trait = dishonorable5 }
		}

		mult_modifier = {
			factor = 5

			FROM = {
				OR = {
					trait = dishonorable6
					trait = dishonorable7
					trait = dishonorable8
					trait = dishonorable9
					trait = dishonorable10
				}
			}
		}

		mult_modifier = {
			factor = 0.1
			FROM = { pacifist = yes }
		}

		mult_modifier = {
			factor = 2.0
			FROM = { trait = envious }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = arbitrary }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { trait = paranoid }
		}

		mult_modifier = {
			factor = 2.0
			FROM = { trait = cruel }
		}

		mult_modifier = {
			factor = 2.0
			FROM = { trait = deceitful }
		}

		mult_modifier = {
			factor = 3.0
			FROM = { trait = ambitious }
		}

		mult_modifier = {
			factor = 5.0
			FROM = { trait = decadent }
		}

		mult_modifier = {
			factor = 10
			FROM = { trait = possessed }
		}

		mult_modifier = {
			factor = 0.5

			FROM = {
				NOR = {
					trait = envious
					trait = deceitful
					trait = ambitious
					trait = cruel
					trait = arbitrary
					trait = lunatic
					trait = possessed
				}

				opinion = {
					who = ROOT
					value >= 0
				}
			}
		}

		mult_modifier = {
			factor = 1.5

			reverse_opinion = {
				who = FROM
				value < -25
			}
		}

		mult_modifier = {
			factor = 2.0

			reverse_opinion = {
				who = FROM
				value < -50
			}
		}

		mult_modifier = {
			factor = 2.0

			reverse_opinion = {
				who = FROM
				value < -75
			}
		}

		mult_modifier = {
			factor = 0.25
			FROM = { intrigue < 4 }
		}

		mult_modifier = {
			factor = 0.25
			FROM = { intrigue < 8 }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { intrigue >= 12 }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { intrigue >= 15 }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { intrigue >= 18 }
		}

		mult_modifier = {
			factor = 1.5
			FROM = { intrigue >= 21 }
		}
	}
}